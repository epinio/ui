{"version":3,"file":"epinio-1.13.8-rc3.umd.min.dialog.js","mappings":"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","sources":["webpack://epinio-1.13.8-rc3/./dialog/ExportAppDialog.vue?b0e7","webpack://epinio-1.13.8-rc3/./dialog/ExportAppDialog.vue?358d","webpack://epinio-1.13.8-rc3/./dialog/LoginDialog.vue?3c68","webpack://epinio-1.13.8-rc3/./dialog/LoginDialog.vue","webpack://epinio-1.13.8-rc3/./dialog/LoginDialog.vue?a26c","webpack://epinio-1.13.8-rc3/./dialog/LoginDialog.vue?c348","webpack://epinio-1.13.8-rc3/./dialog/ExportAppDialog.vue?6824","webpack://epinio-1.13.8-rc3/./dialog/ExportAppDialog.vue","webpack://epinio-1.13.8-rc3/./dialog/ExportAppDialog.vue?d606","webpack://epinio-1.13.8-rc3/./dialog/LoginDialog.vue?c823"],"sourcesContent":["// style-loader: Adds some css to the DOM by adding a <style> tag\n\n// load the styles\nvar content = require(\"!!../../../node_modules/css-loader/dist/cjs.js??clonedRuleSet-23.use[1]!../../../node_modules/vue-loader/dist/stylePostLoader.js!../../../node_modules/postcss-loader/dist/cjs.js??clonedRuleSet-23.use[2]!../../../node_modules/postcss-loader/dist/cjs.js??clonedRuleSet-23.use[3]!../../../node_modules/sass-loader/dist/cjs.js??clonedRuleSet-23.use[4]!../../../node_modules/cache-loader/dist/cjs.js??ruleSet[0].use[0]!../../../node_modules/vue-loader/dist/index.js??ruleSet[0].use[1]!./ExportAppDialog.vue?vue&type=style&index=0&id=06c89c66&lang=scss&scoped=true\");\nif(content.__esModule) content = content.default;\nif(typeof content === 'string') content = [[module.id, content, '']];\nif(content.locals) module.exports = content.locals;\n// add the styles to the DOM\nvar add = require(\"!../../../node_modules/vue-style-loader/lib/addStylesClient.js\").default\nvar update = add(\"6996c0eb\", content, true, {\"sourceMap\":false,\"shadowMode\":false});","// Imports\nimport ___CSS_LOADER_API_NO_SOURCEMAP_IMPORT___ from \"../../../node_modules/css-loader/dist/runtime/noSourceMaps.js\";\nimport ___CSS_LOADER_API_IMPORT___ from \"../../../node_modules/css-loader/dist/runtime/api.js\";\nvar ___CSS_LOADER_EXPORT___ = ___CSS_LOADER_API_IMPORT___(___CSS_LOADER_API_NO_SOURCEMAP_IMPORT___);\n// Module\n___CSS_LOADER_EXPORT___.push([module.id, \".export-app-dialog__title[data-v-06c89c66]{margin-bottom:0}.export-app-dialog__tab[data-v-06c89c66]{min-height:110px}.progress-info span[data-v-06c89c66]{display:block;margin-bottom:10px}\", \"\"]);\n// Exports\nexport default ___CSS_LOADER_EXPORT___;\n","import { defineComponent as _defineComponent } from 'vue'\nimport { unref as _unref, renderList as _renderList, Fragment as _Fragment, openBlock as _openBlock, createElementBlock as _createElementBlock, createVNode as _createVNode, createCommentVNode as _createCommentVNode, toDisplayString as _toDisplayString, normalizeClass as _normalizeClass, createElementVNode as _createElementVNode, withModifiers as _withModifiers } from \"vue\"\n\nconst _hoisted_1 = { class: \"login-dialog\" }\nconst _hoisted_2 = { key: 0 }\nconst _hoisted_3 = { key: 1 }\nconst _hoisted_4 = {\n  key: 2,\n  class: \"local\"\n}\nconst _hoisted_5 = { class: \"mb-20\" }\nconst _hoisted_6 = { class: \"mb-20\" }\nconst _hoisted_7 = {\n  key: 3,\n  class: \"mt-20 text-center\"\n}\nconst _hoisted_8 = {\n  key: 4,\n  class: \"mt-20 text-center\"\n}\n\nimport axios from 'axios';\nimport { useStore } from 'vuex';\nimport { ref, onMounted } from 'vue';\n\nimport epinioAuth, { EpinioAuthTypes } from '../utils/auth';\nimport { stringify, exceptionToErrorsArray } from '@shell/utils/error';\nimport { EpinioCluster } from '../models/cluster';\n\nimport { Banner } from '@components/Banner';\nimport Password from '@shell/components/form/Password';\nimport { LabeledInput } from '@components/Form/LabeledInput';\n\n\nexport default /*@__PURE__*/_defineComponent({\n  __name: 'LoginDialog',\n  props: {\n    cluster: {}\n  },\n  emits: [\"close\"],\n  setup(__props: any, { emit: __emit }) {\n\nconst store = useStore();\n\nconst emit = __emit;\n\nconst props = __props\n\nconst PROVIDER_TYPES = {\n  LOCAL: 'local',\n  DEX:   'dex',\n};\n\nconst username = ref<string>('');\nconst password = ref<string>('');\nconst selectedAuthType = ref<string>('');\nconst busy = ref<boolean>(false);\n\nlet errors: Error[] = [];\nlet selectedTab: string;\n\nonMounted(() => {\n  if (!props.cluster.oidcEnabled) {\n    selectedAuthType.value = PROVIDER_TYPES.LOCAL;\n  } else {\n    selectedAuthType.value = PROVIDER_TYPES.DEX;\n  }\n})\n\nconst selectType = (type: string) => {\n  errors = [];\n  selectedAuthType.value = type as string;\n}\n\nconst login = async (provider: string) => {\n  busy.value = true;\n  errors = [];\n\n  try {\n    switch (provider) {\n      case PROVIDER_TYPES.LOCAL:\n        if (!username.value) {\n          errors.push(new Error('Username'));\n        }\n        if (!password.value) {\n          errors.push(new Error('Password'));\n        }\n        if (errors.length) {\n          throw new Error(`${ errors.join('/') } Required`);\n        }\n\n        await epinioAuth.login(props.cluster.createAuthConfig(\n          EpinioAuthTypes.LOCAL, {\n            username: username.value,\n            password: password.value,\n            $axios:   axios,\n          }\n        ));\n        break;\n      case PROVIDER_TYPES.DEX:\n        await epinioAuth.login(props.cluster.createAuthConfig(EpinioAuthTypes.DEX));\n        break;\n      default:\n        throw new Error(`Unknown log in type: ${ selectedTab }`);\n    }\n    props.cluster.loggedIn = true;\n\n    //Ensure the store knows the dialog has been closed. \n    emit('close');\n\n    store.$router.push({\n      name:   'epinio-c-cluster-dashboard',\n      params: { cluster: props.cluster.id }\n    });\n  } catch (err) {\n    errors.push(...exceptionToErrorsArray(err));\n  }\n\n  busy.value = false;\n}\n\nreturn (_ctx: any,_cache: any) => {\n  return (_openBlock(), _createElementBlock(\"div\", _hoisted_1, [\n    (_unref(errors).length)\n      ? (_openBlock(), _createElementBlock(\"div\", _hoisted_2, [\n          (_openBlock(true), _createElementBlock(_Fragment, null, _renderList(_unref(errors), (err, idx) => {\n            return (_openBlock(), _createElementBlock(\"div\", { key: idx }, [\n              _createVNode(_unref(Banner), {\n                color: \"error\",\n                label: _unref(stringify)(err.Message || err)\n              }, null, 8, [\"label\"])\n            ]))\n          }), 128))\n        ]))\n      : _createCommentVNode(\"\", true),\n    (selectedAuthType.value == PROVIDER_TYPES.DEX)\n      ? (_openBlock(), _createElementBlock(\"div\", _hoisted_3, [\n          _createElementVNode(\"button\", {\n            ref: \"btn\",\n            class: _normalizeClass([{'disabled': busy.value}, \"btn bg-primary\"]),\n            style: {\"font-size\":\"18px\"},\n            onClick: _cache[0] || (_cache[0] = ($event: any) => (!busy.value && login(PROVIDER_TYPES.DEX)))\n          }, _toDisplayString(_ctx.t('epinio.login.genericProvider')), 3)\n        ]))\n      : _createCommentVNode(\"\", true),\n    (selectedAuthType.value === PROVIDER_TYPES.LOCAL)\n      ? (_openBlock(), _createElementBlock(\"div\", _hoisted_4, [\n          _createElementVNode(\"form\", {\n            class: \"login-form\",\n            onSubmit: _cache[3] || (_cache[3] = _withModifiers(($event: any) => (!busy.value && login(PROVIDER_TYPES.LOCAL)), [\"prevent\"]))\n          }, [\n            _createElementVNode(\"div\", _hoisted_5, [\n              _createVNode(_unref(LabeledInput), {\n                id: \"username\",\n                value: username.value,\n                \"onUpdate:value\": _cache[1] || (_cache[1] = ($event: any) => ((username).value = $event)),\n                label: _ctx.t('login.username'),\n                required: true\n              }, null, 8, [\"value\", \"label\"])\n            ]),\n            _createElementVNode(\"div\", _hoisted_6, [\n              _createVNode(_unref(Password), {\n                id: \"password\",\n                value: password.value,\n                \"onUpdate:value\": _cache[2] || (_cache[2] = ($event: any) => ((password).value = $event)),\n                label: _ctx.t('login.password'),\n                required: true\n              }, null, 8, [\"value\", \"label\"])\n            ]),\n            _createElementVNode(\"button\", {\n              ref: \"btn\",\n              type: \"submit\",\n              class: _normalizeClass([\"btn bg-primary\", {'disabled': busy.value}]),\n              style: {\"font-size\":\"18px\"}\n            }, _toDisplayString(_ctx.t(_ctx.cluster.oidcEnabled ? 'login.loginWithLocal' : 'epinio.login.login')), 3)\n          ], 32)\n        ]))\n      : _createCommentVNode(\"\", true),\n    (selectedAuthType.value === PROVIDER_TYPES.DEX)\n      ? (_openBlock(), _createElementBlock(\"div\", _hoisted_7, [\n          _createElementVNode(\"a\", {\n            class: _normalizeClass({'disabled': busy.value}),\n            role: \"button\",\n            onClick: _cache[4] || (_cache[4] = ($event: any) => (!busy.value && selectType(PROVIDER_TYPES.LOCAL)))\n          }, _toDisplayString(_ctx.t('login.useLocal')), 3)\n        ]))\n      : _createCommentVNode(\"\", true),\n    (_ctx.cluster.oidcEnabled && selectedAuthType.value === PROVIDER_TYPES.LOCAL)\n      ? (_openBlock(), _createElementBlock(\"div\", _hoisted_8, [\n          _createElementVNode(\"a\", {\n            class: _normalizeClass({'disabled': busy.value}),\n            role: \"button\",\n            onClick: _cache[5] || (_cache[5] = ($event: any) => (!busy.value && selectType(PROVIDER_TYPES.DEX)))\n          }, _toDisplayString(_ctx.t('epinio.login.useGenericProvider', {})), 3)\n        ]))\n      : _createCommentVNode(\"\", true)\n  ]))\n}\n}\n\n})","<script setup lang=\"ts\">\nimport axios from 'axios';\nimport { useStore } from 'vuex';\nimport { ref, onMounted } from 'vue';\n\nimport epinioAuth, { EpinioAuthTypes } from '../utils/auth';\nimport { stringify, exceptionToErrorsArray } from '@shell/utils/error';\nimport { EpinioCluster } from '../models/cluster';\n\nimport { Banner } from '@components/Banner';\nimport Password from '@shell/components/form/Password';\nimport { LabeledInput } from '@components/Form/LabeledInput';\n\nconst store = useStore();\n\nconst emit = defineEmits<{\n  (e: 'close'): void\n}>();\n\nconst props = defineProps<{\n  cluster: EpinioCluster,\n}>()\n\nconst PROVIDER_TYPES = {\n  LOCAL: 'local',\n  DEX:   'dex',\n};\n\nconst username = ref<string>('');\nconst password = ref<string>('');\nconst selectedAuthType = ref<string>('');\nconst busy = ref<boolean>(false);\n\nlet errors: Error[] = [];\nlet selectedTab: string;\n\nonMounted(() => {\n  if (!props.cluster.oidcEnabled) {\n    selectedAuthType.value = PROVIDER_TYPES.LOCAL;\n  } else {\n    selectedAuthType.value = PROVIDER_TYPES.DEX;\n  }\n})\n\nconst selectType = (type: string) => {\n  errors = [];\n  selectedAuthType.value = type as string;\n}\n\nconst login = async (provider: string) => {\n  busy.value = true;\n  errors = [];\n\n  try {\n    switch (provider) {\n      case PROVIDER_TYPES.LOCAL:\n        if (!username.value) {\n          errors.push(new Error('Username'));\n        }\n        if (!password.value) {\n          errors.push(new Error('Password'));\n        }\n        if (errors.length) {\n          throw new Error(`${ errors.join('/') } Required`);\n        }\n\n        await epinioAuth.login(props.cluster.createAuthConfig(\n          EpinioAuthTypes.LOCAL, {\n            username: username.value,\n            password: password.value,\n            $axios:   axios,\n          }\n        ));\n        break;\n      case PROVIDER_TYPES.DEX:\n        await epinioAuth.login(props.cluster.createAuthConfig(EpinioAuthTypes.DEX));\n        break;\n      default:\n        throw new Error(`Unknown log in type: ${ selectedTab }`);\n    }\n    props.cluster.loggedIn = true;\n\n    //Ensure the store knows the dialog has been closed. \n    emit('close');\n\n    store.$router.push({\n      name:   'epinio-c-cluster-dashboard',\n      params: { cluster: props.cluster.id }\n    });\n  } catch (err) {\n    errors.push(...exceptionToErrorsArray(err));\n  }\n\n  busy.value = false;\n}\n</script>\n\n<template>\n  <div class=\"login-dialog\">\n    <div v-if=\"errors.length\">\n      <div\n        v-for=\"(err, idx) in errors\"\n        :key=\"idx\"\n      >\n        <Banner\n          color=\"error\"\n          :label=\"stringify(err.Message || err)\"\n        />\n      </div>\n    </div>\n    <div v-if=\"selectedAuthType == PROVIDER_TYPES.DEX\">\n      <button\n        ref=\"btn\"\n        :class=\"{'disabled': busy}\"\n        class=\"btn bg-primary\"\n        style=\"font-size: 18px;\"\n        @click=\"!busy && login(PROVIDER_TYPES.DEX)\"\n      >\n        {{ t('epinio.login.genericProvider') }}\n      </button>\n    </div>\n    <div\n      v-if=\"selectedAuthType === PROVIDER_TYPES.LOCAL\"\n      class=\"local\"\n    >\n      <form\n        class=\"login-form\"\n        @submit.prevent=\"!busy && login(PROVIDER_TYPES.LOCAL)\"\n      >\n        <div class=\"mb-20\">\n          <LabeledInput\n            id=\"username\"\n            v-model:value=\"username\"\n            :label=\"t('login.username')\"\n            :required=\"true\"\n          />\n        </div>\n        <div class=\"mb-20\">\n          <Password\n            id=\"password\"\n            v-model:value=\"password\"\n            :label=\"t('login.password')\"\n            :required=\"true\"\n          />\n        </div>\n        <button\n          ref=\"btn\"\n          type=\"submit\"\n          class=\"btn bg-primary\"\n          :class=\"{'disabled': busy}\"\n          style=\"font-size: 18px;\"\n          >\n          {{ t(cluster.oidcEnabled ? 'login.loginWithLocal' : 'epinio.login.login') }}\n        </button>\n      </form>\n    </div>\n\n    <div\n      v-if=\"selectedAuthType === PROVIDER_TYPES.DEX\"\n      class=\"mt-20 text-center\"\n    >\n      <a\n        :class=\"{'disabled': busy}\"\n        role=\"button\"\n        @click=\"!busy && selectType(PROVIDER_TYPES.LOCAL)\"\n      >\n        {{ t('login.useLocal') }}\n      </a>\n    </div>\n    <div\n      v-if=\"cluster.oidcEnabled && selectedAuthType === PROVIDER_TYPES.LOCAL\"\n      class=\"mt-20 text-center\"\n    >\n      <a\n        :class=\"{'disabled': busy}\"\n        role=\"button\"\n        @click=\"!busy && selectType(PROVIDER_TYPES.DEX)\"\n      >\n        {{ t('epinio.login.useGenericProvider', {}) }}\n      </a>\n    </div>\n  </div>\n</template>\n<style lang='scss' scoped>\n$min-width: 400px;\n\n.login-dialog {\n  padding: 20px;\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n  justify-content: center;\n  min-height: 240px;\n\n  .login-form {\n    display: flex;\n    flex-direction: column;\n    align-items: center;\n  }\n\n  .banner {\n    min-width: $min-width;\n  }\n\n  .local {\n    display: flex;\n    flex-direction: column;\n    align-items: center;\n\n    .labeled-input, .password {\n      min-width: $min-width;\n    }\n  }\n}\n</style>\n","import script from \"./LoginDialog.vue?vue&type=script&setup=true&lang=ts\"\nexport * from \"./LoginDialog.vue?vue&type=script&setup=true&lang=ts\"\n\nimport \"./LoginDialog.vue?vue&type=style&index=0&id=5055d14e&lang=scss&scoped=true\"\n\nimport exportComponent from \"../../../node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['__scopeId',\"data-v-5055d14e\"]])\n\nexport default __exports__","// style-loader: Adds some css to the DOM by adding a <style> tag\n\n// load the styles\nvar content = require(\"!!../../../node_modules/css-loader/dist/cjs.js??clonedRuleSet-23.use[1]!../../../node_modules/vue-loader/dist/stylePostLoader.js!../../../node_modules/postcss-loader/dist/cjs.js??clonedRuleSet-23.use[2]!../../../node_modules/postcss-loader/dist/cjs.js??clonedRuleSet-23.use[3]!../../../node_modules/sass-loader/dist/cjs.js??clonedRuleSet-23.use[4]!../../../node_modules/cache-loader/dist/cjs.js??ruleSet[0].use[0]!../../../node_modules/vue-loader/dist/index.js??ruleSet[0].use[1]!./LoginDialog.vue?vue&type=style&index=0&id=5055d14e&lang=scss&scoped=true\");\nif(content.__esModule) content = content.default;\nif(typeof content === 'string') content = [[module.id, content, '']];\nif(content.locals) module.exports = content.locals;\n// add the styles to the DOM\nvar add = require(\"!../../../node_modules/vue-style-loader/lib/addStylesClient.js\").default\nvar update = add(\"62a683df\", content, true, {\"sourceMap\":false,\"shadowMode\":false});","import { defineComponent as _defineComponent } from 'vue'\nimport { unref as _unref, toDisplayString as _toDisplayString, createElementVNode as _createElementVNode, withCtx as _withCtx, createVNode as _createVNode, createTextVNode as _createTextVNode, openBlock as _openBlock, createElementBlock as _createElementBlock, createCommentVNode as _createCommentVNode, mergeProps as _mergeProps, createBlock as _createBlock } from \"vue\"\n\nconst _hoisted_1 = { class: \"text-default-text export-app-dialog__title\" }\nconst _hoisted_2 = {\n  key: 0,\n  class: \"progress-info text info mb-10 mt-20\"\n}\nconst _hoisted_3 = { key: 0 }\n\nimport { useStore } from 'vuex'\nimport {ref, computed, onMounted, onBeforeUnmount } from 'vue';\n\nimport JSZip from 'jszip';\n\nimport { APPLICATION_PARTS } from '../types';\nimport Banner from '@components/Banner/Banner.vue';\nimport Tab from '@shell/components/Tabbed/Tab.vue';\nimport { downloadFile } from '@shell/utils/download';\nimport GenericPrompt from '@shell/dialog/GenericPrompt';\nimport Tabbed from '@shell/components/Tabbed/index.vue';\nimport PercentageBar from '@shell/components/PercentageBar';\n\n\nexport default /*@__PURE__*/_defineComponent({\n  __name: 'ExportAppDialog',\n  props: {\n    resources: {}\n  },\n  emits: [\"close\"],\n  setup(__props: any, { emit: __emit }) {\n\nconst store = useStore();\nconst t = store.getters['i18n/t'];\nconst emit = __emit;\n\nconst props = __props;\n\nconst showProgressBar = ref<boolean>(false);\nconst percentages = ref<object>({});\nconst step = ref<any>(null);\nconst cancelTokenSources:object = {};\nconst colorStops:object = { 0: '--primary', 100: '--primary' };\nconst genericPrompt = ref<HTMLElement>(null);\n\nconst partsWeight = {\n  [APPLICATION_PARTS.VALUES]: 0.1,\n  [APPLICATION_PARTS.CHART]:  0.1,\n  [APPLICATION_PARTS.IMAGE]:  0.7\n};\n\nconst zipParts = props.resources[0]?.applicationParts.filter(\n  (part) => part !== APPLICATION_PARTS.MANIFEST\n);\n\nonMounted(() => {\n  document.addEventListener('keyup', escapeHandler);\n});\n\nonBeforeUnmount(() => {\n  //Need to wait to remove this so the event listener isn't removed before a \n  //download is cancelled.\n  setTimeout(() => {\n    document.removeEventListener('keyup', escapeHandler);\n  }, 2000);\n});\n\nconst progressBar = computed({\n  get() {\n    return Object.keys(percentages.value).reduce(\n      (acc, part) => acc + (percentages.value[part] * (partsWeight[part] || 1)), 0);\n  },\n  set(value) {\n    percentages.value = { value };\n  }\n}, { immediate: true });\n\nconst exportApplicationManifest = async () => {\n  enableDownload();\n  const resource = props.resources[0];\n\n  const chartZip = async(files) => {\n    const zip = new JSZip();\n\n    for (const fileName in files) {\n      const extension = {\n        [APPLICATION_PARTS.VALUES]: 'yaml',\n        [APPLICATION_PARTS.CHART]:  'tar.gz',\n        [APPLICATION_PARTS.IMAGE]:  'tar',\n      };\n\n      zip.file(`${ fileName }.${ extension[fileName] }`, files[fileName]);\n    }\n\n    const contents = await zip.generateAsync({\n      type: 'blob',\n      compression: 'STORE',\n    });\n\n    await downloadFile(\n      `${ resource.meta.name }-helm-chart.zip`,\n      contents,\n      'application/zip',\n    );\n  };\n\n  if (store.$router.currentRoute._value.hash === '#manifest') {\n    await resource.createManifest();\n  } else {\n    const partsData = await zipParts.reduce(async(acc, part) => ({\n      ...await acc,\n      [part]: await fetchPart(resource, part),\n    }), Promise.resolve({}));\n\n    if (Object.values(partsData).some((part) => !part)) {\n      return;\n    }\n\n    toggleStep('zip');\n\n    await chartZip(partsData);\n\n    progressBar.value = 100;\n    await delayBeforeClose(1500);\n  }\n}\n\nconst config = {\n  title:       t('promptRemove.title'),\n  applyMode:   'export',\n  applyAction: exportApplicationManifest,\n};\n\nconst getCancelToken = () => {\n  return store.$axios.CancelToken;\n}\n\nconst fetchPart = async (resource, part) => {\n  toggleStep(part, true);\n  cancelTokenSources[part] = getCancelToken().source();\n\n  return await resource.fetchPart(\n    part, {\n      onDownloadProgress: (progressEvent) => {\n        const total = progressEvent.event.srcElement.getResponseHeader('content-length') ||\n          progressEvent.event.srcElement.getResponseHeader('proxy-content-length');\n\n        if (total) {\n          percentages.value[part] = Math.round(progressEvent.loaded * 100 / total);\n        }\n\n        if (progressEvent.loaded > 0) {\n          toggleStep(part);\n        }\n      },\n      cancelToken: cancelTokenSources[part].token\n    }).catch((thrown) => {\n      if (!store.$axios.isCancel(thrown)) {\n        disableDownload();\n\n        // Override only messages of server errors\n        const message = thrown.message ?? t(\n          'epinio.applications.export.chartValuesImages.error', \n          { part },\n        );\n\n        throw new Error(message);\n      }\n    }\n  );\n}\n\nconst fetchCancel = () => {\n  // Cancel pending api requests, see https://axios-http.com/docs/cancellation\n  Object.keys(cancelTokenSources).forEach(\n    (part) => cancelTokenSources[part].\n      cancel(`${ part } part: download cancelled.`)\n  );\n}\n\nconst close = () => {\n  if (store.$router.currentRoute._value.hash !== '#manifest') {\n    fetchCancel();\n  }\n\n  emit('close');\n}\n\nconst escapeHandler = (e: KeyboardEvent) => {\n  if (e.key === 'Escape') {\n    close();\n  }\n}\n\nconst resetErrors = () => {\n  if (genericPrompt.value) {\n    genericPrompt.value.errors = [];\n  }\n}\n\nconst enableDownload = () => {\n  resetErrors();\n  showProgressBar.value = true;\n}\n\nconst disableDownload = () => {\n  fetchCancel();\n  showProgressBar.value = false;\n  progressBar.value = 0;\n  toggleStep(null);\n}\n\nconst delayBeforeClose = async (seconds) => {\n  return await new Promise((resolve) => setTimeout(resolve, seconds));\n}\n\nconst toggleStep = (part, isPreparing = false) => {\n  step.value = part ? `${ isPreparing ? 'preparing' : 'download' }.${ part }` : null;\n}\n\nreturn (_ctx: any,_cache: any) => {\n  return (_openBlock(), _createBlock(_unref(GenericPrompt), _mergeProps({\n    ref_key: \"genericPrompt\",\n    ref: genericPrompt\n  }, config, { onClose: close }), {\n    title: _withCtx(() => [\n      _createElementVNode(\"h4\", _hoisted_1, _toDisplayString(_unref(t)('epinio.applications.export.label')), 1)\n    ]),\n    body: _withCtx(() => [\n      _createVNode(Tabbed, { onChanged: resetErrors }, {\n        default: _withCtx(() => [\n          _createVNode(Tab, {\n            \"label-key\": \"epinio.applications.export.manifest.title\",\n            name: \"manifest\",\n            weight: 3,\n            class: \"export-app-dialog__tab\"\n          }, {\n            default: _withCtx(() => [\n              _createElementVNode(\"p\", null, _toDisplayString(_unref(t)('epinio.applications.export.manifest.description')), 1)\n            ]),\n            _: 1\n          }),\n          _createVNode(Tab, {\n            \"label-key\": \"epinio.applications.export.chartValuesImages.title\",\n            name: \"chart\",\n            weight: 2,\n            class: \"export-app-dialog__tab\"\n          }, {\n            default: _withCtx(() => [\n              _createElementVNode(\"p\", null, _toDisplayString(_unref(t)('epinio.applications.export.chartValuesImages.description')), 1),\n              _createVNode(Banner, { color: \"info\" }, {\n                default: _withCtx(() => [\n                  _createTextVNode(_toDisplayString(_unref(t)('epinio.applications.export.chartValuesImages.banner')), 1)\n                ]),\n                _: 1\n              }),\n              (showProgressBar.value)\n                ? (_openBlock(), _createElementBlock(\"div\", _hoisted_2, [\n                    (step.value)\n                      ? (_openBlock(), _createElementBlock(\"span\", _hoisted_3, _toDisplayString(_unref(t)(`epinio.applications.export.chartValuesImages.steps.${ step.value }`)), 1))\n                      : _createCommentVNode(\"\", true),\n                    _createVNode(_unref(PercentageBar), {\n                      class: \"progress-bar\",\n                      modelValue: progressBar.value,\n                      \"color-stops\": colorStops,\n                      \"preferred-direction\": \"MORE\"\n                    }, null, 8, [\"modelValue\"])\n                  ]))\n                : _createCommentVNode(\"\", true)\n            ]),\n            _: 1\n          })\n        ]),\n        _: 1\n      })\n    ]),\n    _: 1\n  }, 16))\n}\n}\n\n})","<script setup lang=\"ts\">\nimport { useStore } from 'vuex'\nimport {ref, computed, onMounted, onBeforeUnmount } from 'vue';\n\nimport JSZip from 'jszip';\n\nimport { APPLICATION_PARTS } from '../types';\nimport Banner from '@components/Banner/Banner.vue';\nimport Tab from '@shell/components/Tabbed/Tab.vue';\nimport { downloadFile } from '@shell/utils/download';\nimport GenericPrompt from '@shell/dialog/GenericPrompt';\nimport Tabbed from '@shell/components/Tabbed/index.vue';\nimport PercentageBar from '@shell/components/PercentageBar';\n\nconst store = useStore();\nconst t = store.getters['i18n/t'];\nconst emit = defineEmits<{\n  (e: 'close'): void\n}>();\n\nconst props = defineProps<{\n  resources: Array,\n}>();\n\nconst showProgressBar = ref<boolean>(false);\nconst percentages = ref<object>({});\nconst step = ref<any>(null);\nconst cancelTokenSources:object = {};\nconst colorStops:object = { 0: '--primary', 100: '--primary' };\nconst genericPrompt = ref<HTMLElement>(null);\n\nconst partsWeight = {\n  [APPLICATION_PARTS.VALUES]: 0.1,\n  [APPLICATION_PARTS.CHART]:  0.1,\n  [APPLICATION_PARTS.IMAGE]:  0.7\n};\n\nconst zipParts = props.resources[0]?.applicationParts.filter(\n  (part) => part !== APPLICATION_PARTS.MANIFEST\n);\n\nonMounted(() => {\n  document.addEventListener('keyup', escapeHandler);\n});\n\nonBeforeUnmount(() => {\n  //Need to wait to remove this so the event listener isn't removed before a \n  //download is cancelled.\n  setTimeout(() => {\n    document.removeEventListener('keyup', escapeHandler);\n  }, 2000);\n});\n\nconst progressBar = computed({\n  get() {\n    return Object.keys(percentages.value).reduce(\n      (acc, part) => acc + (percentages.value[part] * (partsWeight[part] || 1)), 0);\n  },\n  set(value) {\n    percentages.value = { value };\n  }\n}, { immediate: true });\n\nconst exportApplicationManifest = async () => {\n  enableDownload();\n  const resource = props.resources[0];\n\n  const chartZip = async(files) => {\n    const zip = new JSZip();\n\n    for (const fileName in files) {\n      const extension = {\n        [APPLICATION_PARTS.VALUES]: 'yaml',\n        [APPLICATION_PARTS.CHART]:  'tar.gz',\n        [APPLICATION_PARTS.IMAGE]:  'tar',\n      };\n\n      zip.file(`${ fileName }.${ extension[fileName] }`, files[fileName]);\n    }\n\n    const contents = await zip.generateAsync({\n      type: 'blob',\n      compression: 'STORE',\n    });\n\n    await downloadFile(\n      `${ resource.meta.name }-helm-chart.zip`,\n      contents,\n      'application/zip',\n    );\n  };\n\n  if (store.$router.currentRoute._value.hash === '#manifest') {\n    await resource.createManifest();\n  } else {\n    const partsData = await zipParts.reduce(async(acc, part) => ({\n      ...await acc,\n      [part]: await fetchPart(resource, part),\n    }), Promise.resolve({}));\n\n    if (Object.values(partsData).some((part) => !part)) {\n      return;\n    }\n\n    toggleStep('zip');\n\n    await chartZip(partsData);\n\n    progressBar.value = 100;\n    await delayBeforeClose(1500);\n  }\n}\n\nconst config = {\n  title:       t('promptRemove.title'),\n  applyMode:   'export',\n  applyAction: exportApplicationManifest,\n};\n\nconst getCancelToken = () => {\n  return store.$axios.CancelToken;\n}\n\nconst fetchPart = async (resource, part) => {\n  toggleStep(part, true);\n  cancelTokenSources[part] = getCancelToken().source();\n\n  return await resource.fetchPart(\n    part, {\n      onDownloadProgress: (progressEvent) => {\n        const total = progressEvent.event.srcElement.getResponseHeader('content-length') ||\n          progressEvent.event.srcElement.getResponseHeader('proxy-content-length');\n\n        if (total) {\n          percentages.value[part] = Math.round(progressEvent.loaded * 100 / total);\n        }\n\n        if (progressEvent.loaded > 0) {\n          toggleStep(part);\n        }\n      },\n      cancelToken: cancelTokenSources[part].token\n    }).catch((thrown) => {\n      if (!store.$axios.isCancel(thrown)) {\n        disableDownload();\n\n        // Override only messages of server errors\n        const message = thrown.message ?? t(\n          'epinio.applications.export.chartValuesImages.error', \n          { part },\n        );\n\n        throw new Error(message);\n      }\n    }\n  );\n}\n\nconst fetchCancel = () => {\n  // Cancel pending api requests, see https://axios-http.com/docs/cancellation\n  Object.keys(cancelTokenSources).forEach(\n    (part) => cancelTokenSources[part].\n      cancel(`${ part } part: download cancelled.`)\n  );\n}\n\nconst close = () => {\n  if (store.$router.currentRoute._value.hash !== '#manifest') {\n    fetchCancel();\n  }\n\n  emit('close');\n}\n\nconst escapeHandler = (e: KeyboardEvent) => {\n  if (e.key === 'Escape') {\n    close();\n  }\n}\n\nconst resetErrors = () => {\n  if (genericPrompt.value) {\n    genericPrompt.value.errors = [];\n  }\n}\n\nconst enableDownload = () => {\n  resetErrors();\n  showProgressBar.value = true;\n}\n\nconst disableDownload = () => {\n  fetchCancel();\n  showProgressBar.value = false;\n  progressBar.value = 0;\n  toggleStep(null);\n}\n\nconst delayBeforeClose = async (seconds) => {\n  return await new Promise((resolve) => setTimeout(resolve, seconds));\n}\n\nconst toggleStep = (part, isPreparing = false) => {\n  step.value = part ? `${ isPreparing ? 'preparing' : 'download' }.${ part }` : null;\n}\n</script>\n\n<template>\n  <GenericPrompt\n    ref=\"genericPrompt\"\n    v-bind=\"config\"\n    @close=\"close\"\n  >\n    <template #title>\n      <h4\n        class=\"text-default-text export-app-dialog__title\"\n      >\n        {{ t('epinio.applications.export.label') }}\n      </h4>\n    </template>\n\n    <template #body>\n      <Tabbed @changed=\"resetErrors\">\n        <Tab\n          label-key=\"epinio.applications.export.manifest.title\"\n          name=\"manifest\"\n          :weight=\"3\"\n          class=\"export-app-dialog__tab\"\n        >\n          <p>\n            {{ t('epinio.applications.export.manifest.description') }}\n          </p>\n        </Tab>\n\n        <Tab\n          label-key=\"epinio.applications.export.chartValuesImages.title\"\n          name=\"chart\"\n          :weight=\"2\"\n          class=\"export-app-dialog__tab\"\n        >\n          <p>\n            {{ t('epinio.applications.export.chartValuesImages.description') }}\n          </p>\n          <Banner\n            color=\"info\"\n          >\n            {{ t('epinio.applications.export.chartValuesImages.banner') }}\n          </Banner>\n\n          <div\n            v-if=\"showProgressBar\"\n            class=\"progress-info text info mb-10 mt-20\"\n          >\n            <span v-if=\"step\">\n              {{ t(`epinio.applications.export.chartValuesImages.steps.${ step }`) }}\n            </span>\n            <PercentageBar\n              class=\"progress-bar\"\n              :modelValue=\"progressBar\"\n              :color-stops=\"colorStops\"\n              preferred-direction=\"MORE\"\n            />\n          </div>\n        </Tab>\n      </Tabbed>\n    </template>\n  </GenericPrompt>\n</template>\n<style lang='scss' scoped>\n.export-app-dialog {\n  &__title {\n    margin-bottom: 0;\n  }\n  &__tab {\n    min-height: 110px;\n  }\n}\n\n.progress-info {\n  span {\n    display: block;\n    margin-bottom: 10px;\n  }\n}\n</style>\n","import script from \"./ExportAppDialog.vue?vue&type=script&setup=true&lang=ts\"\nexport * from \"./ExportAppDialog.vue?vue&type=script&setup=true&lang=ts\"\n\nimport \"./ExportAppDialog.vue?vue&type=style&index=0&id=06c89c66&lang=scss&scoped=true\"\n\nimport exportComponent from \"../../../node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['__scopeId',\"data-v-06c89c66\"]])\n\nexport default __exports__","// Imports\nimport ___CSS_LOADER_API_NO_SOURCEMAP_IMPORT___ from \"../../../node_modules/css-loader/dist/runtime/noSourceMaps.js\";\nimport ___CSS_LOADER_API_IMPORT___ from \"../../../node_modules/css-loader/dist/runtime/api.js\";\nvar ___CSS_LOADER_EXPORT___ = ___CSS_LOADER_API_IMPORT___(___CSS_LOADER_API_NO_SOURCEMAP_IMPORT___);\n// Module\n___CSS_LOADER_EXPORT___.push([module.id, \".login-dialog[data-v-5055d14e]{padding:20px;justify-content:center;min-height:240px}.login-dialog[data-v-5055d14e],.login-dialog .login-form[data-v-5055d14e]{display:flex;flex-direction:column;align-items:center}.login-dialog .banner[data-v-5055d14e]{min-width:400px}.login-dialog .local[data-v-5055d14e]{display:flex;flex-direction:column;align-items:center}.login-dialog .local .labeled-input[data-v-5055d14e],.login-dialog .local .password[data-v-5055d14e]{min-width:400px}\", \"\"]);\n// Exports\nexport default ___CSS_LOADER_EXPORT___;\n"],"names":["content","__esModule","default","module","id","locals","exports","add","___CSS_LOADER_EXPORT___","push","_hoisted_1","class","_hoisted_2","key","_hoisted_3","_hoisted_4","_hoisted_5","_hoisted_6","_hoisted_7","_hoisted_8","_defineComponent","__name","props","cluster","emits","setup","__props","emit","__emit","store","useStore","PROVIDER_TYPES","LOCAL","DEX","username","ref","password","selectedAuthType","busy","selectedTab","errors","onMounted","oidcEnabled","value","selectType","type","login","async","provider","Error","length","join","epinioAuth","createAuthConfig","EpinioAuthTypes","$axios","axios","loggedIn","$router","name","params","err","exceptionToErrorsArray","_ctx","_cache","_openBlock","_createElementBlock","_unref","_Fragment","_renderList","idx","_createVNode","Banner","color","label","stringify","Message","_createCommentVNode","_createElementVNode","_normalizeClass","style","onClick","$event","_toDisplayString","t","onSubmit","_withModifiers","LabeledInput","required","Password","role","__exports__","resources","getters","showProgressBar","percentages","step","cancelTokenSources","colorStops","genericPrompt","partsWeight","APPLICATION_PARTS","VALUES","CHART","IMAGE","zipParts","applicationParts","filter","part","MANIFEST","document","addEventListener","escapeHandler","onBeforeUnmount","setTimeout","removeEventListener","progressBar","computed","get","Object","keys","reduce","acc","set","immediate","exportApplicationManifest","enableDownload","resource","chartZip","zip","JSZip","fileName","files","extension","file","contents","generateAsync","compression","downloadFile","meta","currentRoute","_value","hash","createManifest","partsData","fetchPart","Promise","resolve","values","some","toggleStep","delayBeforeClose","config","title","applyMode","applyAction","getCancelToken","CancelToken","source","onDownloadProgress","progressEvent","total","event","srcElement","getResponseHeader","Math","round","loaded","cancelToken","token","catch","thrown","isCancel","_thrown$message","disableDownload","message","fetchCancel","forEach","cancel","close","e","resetErrors","seconds","isPreparing","_createBlock","GenericPrompt","_mergeProps","ref_key","onClose","_withCtx","body","Tabbed","onChanged","Tab","weight","_","_createTextVNode","PercentageBar","modelValue"],"sourceRoot":""}