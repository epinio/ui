{"version":3,"file":"epinio-1.13.3-rc2.umd.min.edit.js","mappings":"uPAGIA,EAA0B,IAA4B,KAE1DA,EAAwBC,KAAK,CAACC,EAAOC,GAAI,4DAA6D,KAEtG,c,gQCJA,MAAMC,EAAa,CAAEC,IAAK,GACpBC,EAAa,CAAEC,MAAO,OACtBC,EAAa,CAAED,MAAO,cACtBE,EAAa,CAAEF,MAAO,OACtBG,EAAa,CAAEH,MAAO,eAsB5B,OAA4BI,EAAAA,EAAAA,iBAAiB,CAC3CC,OAAQ,iBACRC,MAAO,CACLC,MAAO,CAAC,EACRC,aAAc,CAAC,EACfC,KAAM,CAAC,GAETC,KAAAA,CAAMC,GChBR,MAAMC,GAAQC,EAAAA,EAAAA,MACRC,EAAIF,EAAMG,QAAQ,UAElBT,EAAQK,GAMR,WACJK,EAAU,UACVC,EAAS,aACTC,EAAY,aACZC,EAAY,OACZC,EAAM,+BACNC,IACEC,EAAAA,EAAAA,wBAAuBhB,IAErB,kBAAEiB,IAAsBC,EAAAA,EAAAA,0BAExBC,GAASC,EAAAA,EAAAA,KAAgB,IACzBC,GAAUD,EAAAA,EAAAA,MAAa,GACvBE,GAAmBF,EAAAA,EAAAA,MAAa,IAEtCG,EAAAA,EAAAA,WAAUC,UACRxB,EAAMC,MAAMwB,KAAKC,UAAY1B,EAAME,aAAauB,KAAKC,WACnDC,EAAW1B,MAAM,IAAI2B,SAASC,KAChC7B,EAAMC,MAAM6B,KAAO,IAAK9B,EAAME,aAAa6B,eAAeC,SAC1DpB,EAAaX,MAAQ,IAAID,EAAME,aAAa6B,eAAeE,WAAa,IAExEC,IAEAb,EAAQpB,OAAQ,KAIlBkC,EAAAA,EAAAA,OAAM,CAAC,IAAMnC,EAAMC,MAAOW,GAAe,KACvCK,GAAkB,IACjB,CAAEmB,MAAM,IAEX,MAAMC,GAASC,EAAAA,EAAAA,UAAS,IACftC,EAAMG,OAASoC,EAAAA,IAGlBZ,GAAaW,EAAAA,EAAAA,UAAS,KACnBE,EAAAA,EAAAA,IAAOlC,EAAMG,QAAQ,cAAcgC,EAAAA,GAAaC,WAAY,QAAQ,IAGvEC,GAAiBL,EAAAA,EAAAA,UAAS,IACvBX,EAAW1B,MAAM2C,IAAKC,GAAuBA,EAAEjB,SAASC,OAG3DiB,EAAOA,KACNnC,GAILL,EAAMyC,QAAQC,QAAQ,CACpBnB,KAAQlB,EAAUV,MAClBgD,OAAQvC,EAAWT,OAAS,CAAEiD,SAAUlD,EAAMC,MAAMkD,SAIlDC,EAAO5B,UACXL,EAAOlB,MAAQ,GAEf,IACOoC,EAAOpC,cACJD,EAAMC,MAAMoD,eACZtC,UACAT,EAAMgD,SACV,iBACA,CAAEH,KAAMnD,EAAMC,MAAMkD,KAAMI,IAAK,CAAEC,OAAO,MAIxCnB,EAAOpC,cACHD,EAAMC,MAAMwD,eACZ1C,UACAf,EAAMC,MAAMyD,cAGpBzC,GAAkB,GAClB0C,GAAO,GACPb,GACF,CAAE,MAAOc,GACPC,EAAQC,IAAIF,GACZzC,EAAOlB,OAAQ8D,EAAAA,EAAAA,GAA6BH,GAC5CD,GAAO,EACT,GAGIzB,EAAmBA,KACvB,MAAM8B,GAAaC,EAAAA,EAAAA,GACjBjE,EAAMC,OAAOwB,KAAKI,MAAQ,GAC1BrB,EAAE,yBACFF,EAAMG,aACNyD,EACA,IAGIC,GAAWF,EAAAA,EAAAA,GACfjE,EAAMC,OAAOwB,KAAKC,WAAa,GAC/B,GACApB,EAAMG,aACNyD,EACA,IAGF,GAA0B,IAAtBF,EAAWI,QAAoC,IAApBD,EAASC,OAAc,CACpD,MAAMC,EAAaC,OAAOC,QAAQvE,EAAMC,OAAO6B,MAAQ,CAAC,GAExD,GAAMuC,EAAWD,OAEf,YADA9C,EAAiBrB,OAAQ,EAG7B,CAEAqB,EAAiBrB,OAAQ,GDwC3B,OCrCAkC,EAAAA,EAAAA,OACE,IAAMnC,EAAMC,MAAMwB,KAAKC,UACvB,KACEd,EAAaX,MAAQ,GACrBiC,OAIJC,EAAAA,EAAAA,OACE,IAAMnC,EAAMC,MAAMwB,KAAKI,KACvB,KACEK,OAIJC,EAAAA,EAAAA,OACE,IAAMnC,EAAMC,MAAM6B,KAClB,KACEI,KAEF,CAAEE,MAAM,IDiBH,CAACoC,EAAUC,KCZAD,EAAAvE,OAASoB,EAAApB,QDcpByE,EAAAA,EAAAA,cCdLC,EAAAA,EAAAA,aAAoCC,EAAAA,EAAA,CAAApF,IAAA,KAEvBgF,EAAAvE,QDcNyE,EAAAA,EAAAA,cCfPC,EAAAA,EAAAA,aAoEcE,EAAAA,EAAA,CDpDNrF,IAAK,ECdV,aAAY,MACZW,KAAMqE,EAAArE,KACN,cAAY2E,EAAAA,EAAAA,OAAAnE,GACZuC,SAAUsB,EAAAvE,MACV,YAAU,EACVkB,OAAQA,EAAAlB,MACR,oBAAmBqB,EAAArB,MACpB,gBAAc,iBACb8E,QAAKN,EAAA,KAAAA,EAAA,GAAGO,GAAO7D,EAAAlB,MAAS+E,GACxBC,SAAQ7B,GDgBF,CACD8B,SAASC,EAAAA,EAAAA,SCff,IAKS,CAJDX,EAAAvE,MAAMmF,mBDgBDV,EAAAA,EAAAA,cCjBbC,EAAAA,EAAAA,aAKSU,EAAAA,EAAA,CDaK7F,IAAK,EChBjB8F,MAAM,QDkBO,CACDJ,SAASC,EAAAA,EAAAA,SCjBrB,IAA6D,EDkB/CI,EAAAA,EAAAA,kBAAiBC,EAAAA,EAAAA,kBClB5BV,EAAAA,EAAAA,OAAAtE,EAAAsE,CAAE,uDAAD,KDoBQW,EAAG,MAELC,EAAAA,EAAAA,oBAAoB,IAAI,GCpBzBvE,EAAAlB,MAAOmE,OAAS,IDsBdM,EAAAA,EAAAA,cCtBbiB,EAAAA,EAAAA,oBAOM,MAAApG,EAAA,GDgBSmF,EAAAA,EAAAA,YAAW,ICtBxBiB,EAAAA,EAAAA,oBAKEC,EAAAA,SAAA,MAAAC,EAAAA,EAAAA,YAJmB1E,EAAAlB,MAAM,CAAjB2D,EAAKkC,MDsBOpB,EAAAA,EAAAA,cCvBtBC,EAAAA,EAAAA,aAKEU,EAAAA,EAAA,CAHC7F,IAAKsG,EACNR,MAAM,QACLS,MAAOnC,GDuBO,KAAM,EAAG,CAAC,YACX,UAEN8B,EAAAA,EAAAA,oBAAoB,IAAI,ICvBpCM,EAAAA,EAAAA,aAQEC,EAAAA,EAAA,CAPA,WAAS,OACT,gBAAc,YACb,sBAAqBtD,EAAA1C,MACrB,6BAA2B,EAC3B,sBAAoB,EACpBA,MAAOuE,EAAAvE,MAAMwB,KACbtB,KAAMqE,EAAArE,MDyBE,KAAM,EAAG,CAAC,sBAAuB,QAAS,UCvBrD+F,EAAAA,EAAAA,oBAcM,MAdNzG,EAcM,EAbJyG,EAAAA,EAAAA,oBAYM,MAZNvG,EAYM,EAXJqG,EAAAA,EAAAA,aAUEG,EAAAA,EAAA,CATQlG,OAAO6E,EAAAA,EAAAA,OAAAlE,GDyBP,iBAAkB6D,EAAO,KAAOA,EAAO,GAAM2B,IAAiBC,EAAAA,EAAAA,OAAOzF,GCzB9DA,EAAYX,MAAAmG,EAAA,MAC1BE,QAASjF,EAAApB,MACTsG,UAAUzB,EAAAA,EAAAA,OAAAhE,GACV0F,SAAS1B,EAAAA,EAAAA,OAAAjE,GACT4F,YAAY,EACZtG,KAAMqE,EAAArE,KACNuG,UAAU,EACV,YAAW,uCACXC,aAAa7B,EAAAA,EAAAA,OAAAhE,IAASgE,EAAAA,EAAAA,OAAAtE,EAAAsE,CAAE,wDAAyDA,EAAAA,EAAAA,OAAAtE,EAAAsE,CAAE,0DD0B3E,KAAM,EAAG,CAAC,QAAS,UAAW,WAAY,UAAW,OAAQ,oBAGpEL,EAAO,KAAOA,EAAO,ICzB7ByB,EAAAA,EAAAA,oBAAsB,OAAjBxG,MAAM,UAAQ,WACnBwG,EAAAA,EAAAA,oBAeM,MAfNtG,EAeM,EAdJsG,EAAAA,EAAAA,oBAaM,MAbNrG,EAaM,EAZJmG,EAAAA,EAAAA,aAWEY,EAAAA,EAAA,CAVQ3G,MAAOuE,EAAAvE,MAAM6B,KD0Bb,iBAAkB2C,EAAO,KAAOA,EAAO,GAAM2B,GC1BtC5B,EAAAvE,MAAM6B,KAAIsE,GACxB,qBAAmB,EACnBjG,KAAMqE,EAAArE,KACN0G,OAAO/B,EAAAA,EAAAA,OAAAtE,EAAAsE,CAAE,qCACT,gBAAcA,EAAAA,EAAAA,OAAAtE,EAAAsE,CAAE,uCAChB,aAAWA,EAAAA,EAAAA,OAAAtE,EAAAsE,CAAE,8CACb,eAAaA,EAAAA,EAAAA,OAAAtE,EAAAsE,CAAE,gDACfgC,wBAAwB,EACxB,yBAAuB,EACvB,yBAAuB,GD2Bf,KAAM,EAAG,CAAC,QAAS,OAAQ,QAAS,eAAgB,YAAa,sBAI1ErB,EAAG,EACHsB,GAAI,CAAC,IACJ,EAAG,CAAC,OAAQ,aAAc,WAAY,SAAU,wBACnDrB,EAAAA,EAAAA,oBAAoB,IAAI,EAEhC,I,SEtQA,MAAMsB,EAAc,EAEpB,O,uRCJA,MAAMzH,EAAa,CAAEG,MAAO,oBAwB5B,OAA4BI,EAAAA,EAAAA,iBAAiB,CAC3CC,OAAQ,eACRC,MAAO,CACLC,MAAO,CAAC,EACRC,aAAc,CAAC,EACfC,KAAM,CAAC,GAETC,KAAAA,CAAMC,GCZR,MAAML,EAAQK,GAMR,WACJK,EAAU,UACVC,IACEK,EAAAA,EAAAA,wBAAuBhB,IAErB,kBAAEiB,IAAsBC,EAAAA,EAAAA,0BAExBZ,GAAQC,EAAAA,EAAAA,MAERC,EAAIF,EAAMG,QAAQ,UAElBwG,GAAWC,EAAAA,EAAAA,UAA4B,CAAEC,eAAgB,GAAIC,SAAU,KACvEC,GAASjG,EAAAA,EAAAA,KAAqBpB,EAAMC,MAAMqH,WAC1CnG,GAASC,EAAAA,EAAAA,KAAc,IACvBmG,GAAanG,EAAAA,EAAAA,OACboG,GAAYN,EAAAA,EAAAA,UAA+B,CAAEO,SAAS,IAEtDC,GAAQR,EAAAA,EAAAA,UAAS,CACrB,CACErF,KAAM,SACNkE,MAAOvF,EAAE,0CACTmH,QAASnH,EAAE,4CACXoH,OAAO,EACPC,WAAY,CACVC,SAAU,kDACVC,MAAO,gCAGX,CACElG,KAAM,WACNkE,MAAOvF,EAAE,4CACTmH,QAASnH,EAAE,8CACXoH,OAAO,EACPI,eAAgB,CAAEC,SAAS,MAI3BZ,EAAOpH,MAAMiI,KAAO5H,EAAMyC,QAAQoF,aAAaC,OAAOC,OAAOC,SAC/DjB,EAAOpH,MAAMiI,IAAII,OAAShI,EAAMyC,QAAQoF,aAAaC,OAAOC,MAAMC,SAGpE/G,EAAAA,EAAAA,WAAUC,UACR,MAAM+G,QAAaC,EAAAA,EAAAA,IAAQ,CACzBC,GAAInI,EAAMgD,SAAS,iBAAkB,CAAEH,KAAMV,EAAAA,GAAaC,YAC1DgG,OAAQpI,EAAMgD,SAAS,iBAAkB,CAAEH,KAAMV,EAAAA,GAAakG,aAC9DC,KAAMtI,EAAMgD,SAAS,iBAGvBiE,EAAWtH,MAASsI,EAAuBK,QAI7CzG,EAAAA,EAAAA,OAAM,CAAC8E,EAAUI,GAAS,KACxBpG,GAAkB,IACjB,CAAEmB,MAAM,IAEX,MAAMyG,GAAoBvG,EAAAA,EAAAA,UACxB,IAAiD,YAA1ChC,EAAMyC,QAAQoF,aAAalI,MAAMsI,KAAqB,sBAAwB,IAEjFO,GAAgBxG,EAAAA,EAAAA,UAAS,IACtBtC,EAAMG,OAASoC,EAAAA,IAElBjB,GAAmBgB,EAAAA,EAAAA,UAAS,KAAOgC,OAAOyE,OAAOvB,GAAWwB,KAAMC,GAAUA,IAE5EnG,EAAOA,KACNnC,GAILL,EAAMyC,QAAQC,QAAQ,CACpBnB,KAAQlB,EAAUV,MAClBgD,OAAQvC,EAAWT,OAAS,CAAEiD,SAAUlD,EAAMC,MAAMkD,SAKxD3B,eAAe4B,EAAKO,GAClBxC,EAAOlB,MAAQ,GACf,UACQD,EAAMC,MAAMwD,eAEZzD,EAAMC,MAAMiJ,qBAChBlJ,EAAME,aAAaiJ,yBAA2B,GAC9ClC,EAASE,gBAAkB,UAGvBnH,EAAMC,MAAMmJ,eAChBpJ,EAAME,aAAakH,UAAY,GAC/BH,EAASG,UAAY,UAGjBpH,EAAMC,MAAMyD,aAClBzC,GAAkB,GAClB0C,GAAO,GACPb,GACF,CAAE,MAAOc,GACPzC,EAAOlB,OAAQ8D,EAAAA,EAAAA,GAA6BH,GAC5CD,GAAO,EACT,CACF,CAEA,SAAS0F,EAAIC,EAA0BC,GACrCjF,OAAOC,QAAQgF,GAASC,QAAQ,EAAEhK,EAAKS,MACrCqJ,EAAI9J,GAAOS,GAEf,CAEA,SAASwJ,EAAWF,GAClBvJ,EAAMC,MAAMwB,KAAOzB,EAAMC,MAAMwB,MAAQ,CAAC,EACxCzB,EAAMC,MAAM8B,cAAgB/B,EAAMC,MAAM8B,eAAiB,CAAC,EAC1DsH,EAAIrJ,EAAMC,MAAMwB,KAAM8H,EAAQ9H,MAC9B4H,EAAIrJ,EAAMC,MAAM8B,cAAewH,EAAQxH,cACzC,CAEA,SAASmH,EAAqBK,GAC5BjF,OAAOoF,OAAOzC,EAAUsC,EAC1B,CAEA,SAASI,IACPrJ,EAAMyC,QAAQC,QAAQhD,EAAMC,MAAM2J,aACpC,CAEA,SAASC,IACPvJ,EAAMyC,QAAQC,SAAQ8G,EAAAA,EAAAA,GAAkB,wBAAyB,CAC/DC,QAASzJ,EAAMG,QAAQ,aACvByC,SAAUlD,EAAMC,MAAMkD,KACtB7D,GAAI,GAAGU,EAAMC,MAAMwB,KAAKC,aAAa1B,EAAMC,MAAMwB,KAAKI,SAE1D,CAEA,SAASmI,EAAaT,GACpBlC,EAAOpH,MAAQ,CAAC,EAChB,MAAM,SAAEgK,KAAaC,GAAiBX,EAEtCvJ,EAAMC,MAAM8B,cAAgB/B,EAAMC,MAAM8B,eAAiB,CAAC,EAEtDkI,GACFZ,EAAIrJ,EAAMC,MAAM8B,cAAe,CAAEoI,SAAUF,IAG7CZ,EAAIhC,EAAOpH,MAAOiK,EACpB,CAEA,SAASE,EAA6Bb,GACpCF,EAAIrJ,EAAMC,MAAM8B,cAAe,CAAEoF,eAAgBoC,GACnD,CAEA,SAASc,EAASpK,EAAgBqK,GAC5BA,IACF9C,EAAU8C,IAAQrK,GAGpByH,EAAM,GAAGE,MAAQ3H,CACnB,CDYA,MAAO,CAACuE,EAAUC,ICPAD,EAAAvE,QDUXyE,EAAAA,EAAAA,cCTLC,EAAAA,EAAAA,aAoFcE,EAAAA,EAAA,CD1ERrF,IAAK,ECRRE,OAAK6K,EAAAA,EAAAA,gBAAE1B,EAAA5I,OACP,YAAU,EACVE,KAAMqE,EAAArE,KACN+C,SAAUsB,EAAAvE,MACVkB,OAAQA,EAAAlB,MACR,oBAAmBqB,EAAArB,MACnB8E,QAAKN,EAAA,KAAAA,EAAA,GAAGO,GAAc7D,EAAAlB,OAAS6E,EAAAA,EAAAA,OAAAf,EAAAA,EAAAe,CAA6BE,IAC5DC,SAAQ7B,GDUJ,CACD8B,SAASC,EAAAA,EAAAA,SCTb,IAwEe,EAxEfa,EAAAA,EAAAA,aAwEewE,EAAAA,EAAA,CAvEbrK,KAAK,QAAM,CDUL+E,SAASC,EAAAA,EAAAA,SCRf,IA0CM,CAzCE2D,EAAA7I,QDSKyE,EAAAA,EAAAA,cCVbC,EAAAA,EAAAA,aA0CM8F,EAAAA,EAAA,CD/BQjL,IAAK,ECTjB,YAAU,yCACVqC,KAAK,SACJ6I,OAAQ,IDWI,CACDxF,SAASC,EAAAA,EAAAA,SCVrB,IAmCM,EAnCNe,EAAAA,EAAAA,oBAmCM,MAnCN3G,EAmCM,EAlCJyG,EAAAA,EAAAA,aAiCS2E,EAAAA,EAAA,CAhCPjL,MAAM,SACLgI,MAAOA,EACP,gBAAc5C,EAAAA,EAAAA,OAAAtE,EAAAsE,CAAE,0CAChB,wBAAsBA,EAAAA,EAAAA,OAAAtE,EAAAsE,CAAE,4CACzB,cAAY,OACZ,cAAY,OACX,mBAAiB,EACjB8F,SAAQjB,EACR1E,SAAQ4E,GDYM,CCVJxC,QAAMlC,EAAAA,EAAAA,SACf,IAUE,CATMkC,EAAApH,QDWWyE,EAAAA,EAAAA,cCZnBC,EAAAA,EAAAA,aAUEkG,EAAAA,EAAA,CDGkBrL,IAAK,ECXtBsL,YAAatG,EAAAvE,MACboH,OAAQA,EAAApH,MACRE,KAAMqE,EAAArE,KACNyI,KAAMrB,EAAAtH,MACN8K,SAAQf,EACRgB,gBAAevB,EACfwB,kBAAiBb,EACjBc,QAAKzG,EAAA,KAAAA,EAAA,GAAA2B,GAAEsB,EAAM,GAAGE,MAAQxB,IDaN,KAAM,EAAG,CAAC,cAAe,SAAU,OAAQ,WAC9CV,EAAAA,EAAAA,oBAAoB,IAAI,KCXjCyF,UAAQhG,EAAAA,EAAAA,SACjB,EADoBiG,UAAI,EACxBpF,EAAAA,EAAAA,aAMEqF,EAAAA,EAAA,CALCP,YAAatG,EAAAvE,MACboH,OAAQA,EAAApH,MACRgH,SAAUA,EACV9G,KAAMqE,EAAArE,KACNiL,KAAMA,GDcQ,KAAM,EAAG,CAAC,cAAe,SAAU,WAAY,OAAQ,WAE5D3F,EAAG,GACF,EAAG,CAAC,QAAS,eAAgB,6BAGpCA,EAAG,MAELC,EAAAA,EAAAA,oBAAoB,IAAI,ICfpCM,EAAAA,EAAAA,aAYMyE,EAAAA,EAAA,CAXJ,YAAU,yCACV5I,KAAK,OACJ6I,OAAQ,GACRzB,MAAOzB,EAAUC,SDiBT,CACDvC,SAASC,EAAAA,EAAAA,SChBjB,IAKE,EALFa,EAAAA,EAAAA,aAKEsF,EAAAA,EAAA,CAJCR,YAAatG,EAAAvE,MACbE,KAAMqE,EAAArE,KACN4K,SAAQtB,EACRyB,QAAKzG,EAAA,KAAAA,EAAA,GAAA2B,GAAEiE,EAASjE,EAAQ,aDkBd,KAAM,EAAG,CAAC,cAAe,WAE9BX,EAAG,GACF,EAAG,CAAC,WClBfO,EAAAA,EAAAA,aAWMyE,EAAAA,EAAA,CAVJ,YAAU,iDACV5I,KAAK,iBACJ6I,OAAQ,IDoBA,CACDxF,SAASC,EAAAA,EAAAA,SCnBjB,IAKE,EALFa,EAAAA,EAAAA,aAKEuF,EAAAA,EAAA,CAJCT,YAAatG,EAAAvE,MACb,sBAAqBuE,EAAAtE,aACrBC,KAAMqE,EAAArE,KACN4K,SAAQ7B,GDqBE,KAAM,EAAG,CAAC,cAAe,sBAAuB,WAErDzD,EAAG,MAGPA,EAAG,MAGPA,EAAG,GACF,EAAG,CAAC,QAAS,OAAQ,WAAY,SAAU,yBAtG7Cf,EAAAA,EAAAA,cCTLC,EAAAA,EAAAA,aAAyBC,EAAAA,EAAA,CAAApF,IAAA,IDiH3B,I,+BEpSA,MAAMwH,GAA2B,OAAgB,EAAQ,CAAC,CAAC,YAAY,qBAEvE,O,wFCNI7H,EAA0B,IAA4B,KAE1DA,EAAwBC,KAAK,CAACC,EAAOC,GAAI,yFAA0F,KAEnI,c,wBCJA,IAAIkM,EAAU,EAAQ,OACnBA,EAAQC,aAAYD,EAAUA,EAAQtG,SACnB,kBAAZsG,IAAsBA,EAAU,CAAC,CAACnM,EAAOC,GAAIkM,EAAS,MAC7DA,EAAQE,SAAQrM,EAAOsM,QAAUH,EAAQE,QAE5C,IAAIE,EAAM,WACGA,EAAI,WAAYJ,GAAS,EAAM,CAAC,WAAY,EAAM,YAAa,G,wBCN5E,IAAIA,EAAU,EAAQ,OACnBA,EAAQC,aAAYD,EAAUA,EAAQtG,SACnB,kBAAZsG,IAAsBA,EAAU,CAAC,CAACnM,EAAOC,GAAIkM,EAAS,MAC7DA,EAAQE,SAAQrM,EAAOsM,QAAUH,EAAQE,QAE5C,IAAIE,EAAM,WACGA,EAAI,WAAYJ,GAAS,EAAM,CAAC,WAAY,EAAM,YAAa,G,wBCN5E,IAAIA,EAAU,EAAQ,OACnBA,EAAQC,aAAYD,EAAUA,EAAQtG,SACnB,kBAAZsG,IAAsBA,EAAU,CAAC,CAACnM,EAAOC,GAAIkM,EAAS,MAC7DA,EAAQE,SAAQrM,EAAOsM,QAAUH,EAAQE,QAE5C,IAAIE,EAAM,WACGA,EAAI,WAAYJ,GAAS,EAAM,CAAC,WAAY,EAAM,YAAa,G,wFCNxErM,EAA0B,IAA4B,KAE1DA,EAAwBC,KAAK,CAACC,EAAOC,GAAI,mTAAoT,KAE7V,c","sources":["webpack://epinio-1.13.3-rc2/./edit/applications.vue?13a1","webpack://epinio-1.13.3-rc2/./edit/configurations.vue?8948","webpack://epinio-1.13.3-rc2/./edit/configurations.vue","webpack://epinio-1.13.3-rc2/./edit/configurations.vue?0141","webpack://epinio-1.13.3-rc2/./edit/applications.vue?c495","webpack://epinio-1.13.3-rc2/./edit/applications.vue","webpack://epinio-1.13.3-rc2/./edit/applications.vue?fa29","webpack://epinio-1.13.3-rc2/./edit/configurations.vue?7570","webpack://epinio-1.13.3-rc2/./edit/applications.vue?8091","webpack://epinio-1.13.3-rc2/./edit/applications.vue?73a6","webpack://epinio-1.13.3-rc2/./edit/configurations.vue?4879","webpack://epinio-1.13.3-rc2/./edit/applications.vue?d304"],"sourcesContent":["// Imports\nimport ___CSS_LOADER_API_NO_SOURCEMAP_IMPORT___ from \"../../../node_modules/css-loader/dist/runtime/noSourceMaps.js\";\nimport ___CSS_LOADER_API_IMPORT___ from \"../../../node_modules/css-loader/dist/runtime/api.js\";\nvar ___CSS_LOADER_EXPORT___ = ___CSS_LOADER_API_IMPORT___(___CSS_LOADER_API_NO_SOURCEMAP_IMPORT___);\n// Module\n___CSS_LOADER_EXPORT___.push([module.id, \".hide-buttons-deploy .cru__footer{display:none!important}\", \"\"]);\n// Exports\nexport default ___CSS_LOADER_EXPORT___;\n","import { defineComponent as _defineComponent } from 'vue'\nimport { openBlock as _openBlock, createBlock as _createBlock, createCommentVNode as _createCommentVNode, unref as _unref, toDisplayString as _toDisplayString, createTextVNode as _createTextVNode, withCtx as _withCtx, renderList as _renderList, Fragment as _Fragment, createElementBlock as _createElementBlock, createVNode as _createVNode, isRef as _isRef, createElementVNode as _createElementVNode } from \"vue\"\n\nconst _hoisted_1 = { key: 1 }\nconst _hoisted_2 = { class: \"row\" }\nconst _hoisted_3 = { class: \"col span-6\" }\nconst _hoisted_4 = { class: \"row\" }\nconst _hoisted_5 = { class: \"col span-11\" }\n\nimport { useStore } from 'vuex';\nimport { ref, computed, onMounted, watch } from 'vue';\n\nimport EpinioConfiguration from '../models/configurations';\nimport { useEpinioBindAppsMixin } from './bind-apps-mixin';\nimport { useUnsavedChangesMixin } from './unsaved-changes-mixin';\nimport { epinioExceptionToErrorsArray } from '../utils/errors';\nimport { EPINIO_TYPES, EpinioNamespace } from '../types';\n\nimport { sortBy } from '@shell/utils/sort';\nimport { _EDIT } from '@shell/config/query-params';\nimport Loading from '@shell/components/Loading.vue';\nimport Banner from '@components/Banner/Banner.vue';\nimport KeyValue from '@shell/components/form/KeyValue.vue';\nimport CruResource from '@shell/components/CruResource.vue';\nimport LabeledSelect from '@shell/components/form/LabeledSelect.vue';\nimport NameNsDescription from '@shell/components/form/NameNsDescription.vue';\nimport { validateKubernetesName } from '@shell/utils/validators/kubernetes-name';\n\n\nexport default /*@__PURE__*/_defineComponent({\n  __name: 'configurations',\n  props: {\n    value: {},\n    initialValue: {},\n    mode: {}\n  },\n  setup(__props: any) {\n\nconst store = useStore();\nconst t = store.getters['i18n/t'];\n\nconst props = __props;\n\nconst {\n  doneParams,\n  doneRoute,\n  selectedApps,\n  nsAppOptions,\n  noApps,\n  updateConfigurationAppBindings,\n} = useEpinioBindAppsMixin(props);\n\nconst { setUnsavedChanges } = useUnsavedChangesMixin();\n\nconst errors = ref<Array<any>>([]);\nconst pending = ref<boolean>(true);\nconst validationPassed = ref<boolean>(false);\n\nonMounted(async () => {\n  props.value.meta.namespace = props.initialValue.meta.namespace || \n    namespaces.value[0]?.metadata.name;\n  props.value.data = { ...props.initialValue.configuration?.details };\n  selectedApps.value = [...props.initialValue.configuration?.boundapps || []];\n\n  updateValidation();\n\n  pending.value = false;\n});\n\n// Track changes to mark as unsaved\nwatch([() => props.value, selectedApps], () => {\n  setUnsavedChanges(true);\n}, { deep: true });\n\nconst isEdit = computed(() => {\n  return props.mode === _EDIT;\n});\n\nconst namespaces = computed(() => {\n  return sortBy(store.getters['epinio/all'](EPINIO_TYPES.NAMESPACE), 'name', false);\n});\n\nconst namespaceNames = computed(() => {\n  return namespaces.value.map((n: EpinioNamespace) => n.metadata.name);\n});\n\nconst done = () => {\n  if (!doneRoute) {\n    return;\n  }\n\n  store.$router.replace({\n    name:   doneRoute.value,\n    params: doneParams.value || { resource: props.value.type },\n  });\n}\n\nconst save = async (saveCb: (success: boolean) => void) => {\n  errors.value = [];\n\n  try {\n    if (!isEdit.value) {\n      await props.value.create();\n      await updateConfigurationAppBindings();\n      await store.dispatch(\n        'epinio/findAll', \n        { type: props.value.type, opt: { force: true } },\n      );\n    }\n\n    if (isEdit.value) {\n      await props.value.update();\n      await updateConfigurationAppBindings();\n      await props.value.forceFetch();\n    }\n\n    setUnsavedChanges(false); // Clear unsaved changes after successful save\n    saveCb(true);\n    done();\n  } catch (err) {\n    console.log(err);\n    errors.value = epinioExceptionToErrorsArray(err);\n    saveCb(false);\n  }\n};\n\nconst updateValidation = () => {\n  const nameErrors = validateKubernetesName(\n    props.value?.meta.name || '', \n    t('epinio.namespace.name'), \n    store.getters, \n    undefined, \n    [],\n  );\n  \n  const nsErrors = validateKubernetesName(\n    props.value?.meta.namespace || '', \n    '', \n    store.getters, \n    undefined, \n    [],\n  );\n\n  if (nameErrors.length === 0 && nsErrors.length === 0) {\n    const dataValues = Object.entries(props.value?.data || {});\n    \n    if (!!dataValues.length) { // eslint-disable-line no-extra-boolean-cast\n      validationPassed.value = true;\n      return;\n    }\n  }\n\n  validationPassed.value = false;\n};\n\nwatch(\n  () => props.value.meta.namespace,\n  () => {\n    selectedApps.value = [];\n    updateValidation(); // For when a user is supplying their own ns\n  }\n);\n\nwatch(\n  () => props.value.meta.name,\n  () => {\n    updateValidation();\n  }\n);\n\nwatch(\n  () => props.value.data,\n  () => {\n    updateValidation();\n  },\n  { deep: true }\n);\n\nreturn (_ctx: any,_cache: any) => {\n  return (!_ctx.value || pending.value)\n    ? (_openBlock(), _createBlock(Loading, { key: 0 }))\n    : (_ctx.value)\n      ? (_openBlock(), _createBlock(CruResource, {\n          key: 1,\n          \"min-height\": '7em',\n          mode: _ctx.mode,\n          \"done-route\": _unref(doneRoute),\n          resource: _ctx.value,\n          \"can-yaml\": false,\n          errors: errors.value,\n          \"validation-passed\": validationPassed.value,\n          \"namespace-key\": \"meta.namespace\",\n          onError: _cache[2] || (_cache[2] = (e) => (errors.value = e)),\n          onFinish: save\n        }, {\n          default: _withCtx(() => [\n            (_ctx.value.isServiceRelated)\n              ? (_openBlock(), _createBlock(Banner, {\n                  key: 0,\n                  color: \"info\"\n                }, {\n                  default: _withCtx(() => [\n                    _createTextVNode(_toDisplayString(_unref(t)('epinio.configurations.tableHeaders.service.tooltip')), 1)\n                  ]),\n                  _: 1\n                }))\n              : _createCommentVNode(\"\", true),\n            (errors.value.length > 0)\n              ? (_openBlock(), _createElementBlock(\"div\", _hoisted_1, [\n                  (_openBlock(true), _createElementBlock(_Fragment, null, _renderList(errors.value, (err, i) => {\n                    return (_openBlock(), _createBlock(Banner, {\n                      key: i,\n                      color: \"error\",\n                      label: err\n                    }, null, 8, [\"label\"]))\n                  }), 128))\n                ]))\n              : _createCommentVNode(\"\", true),\n            _createVNode(NameNsDescription, {\n              \"name-key\": \"name\",\n              \"namespace-key\": \"namespace\",\n              \"namespaces-override\": namespaceNames.value,\n              \"create-namespace-override\": true,\n              \"description-hidden\": true,\n              value: _ctx.value.meta,\n              mode: _ctx.mode\n            }, null, 8, [\"namespaces-override\", \"value\", \"mode\"]),\n            _createElementVNode(\"div\", _hoisted_2, [\n              _createElementVNode(\"div\", _hoisted_3, [\n                _createVNode(LabeledSelect, {\n                  value: _unref(selectedApps),\n                  \"onUpdate:value\": _cache[0] || (_cache[0] = ($event: any) => (_isRef(selectedApps) ? (selectedApps).value = $event : null)),\n                  loading: pending.value,\n                  disabled: _unref(noApps),\n                  options: _unref(nsAppOptions),\n                  searchable: true,\n                  mode: _ctx.mode,\n                  multiple: true,\n                  \"label-key\": 'epinio.configurations.bindApps.label',\n                  placeholder: _unref(noApps) ? _unref(t)('epinio.configurations.bindApps.placeholderNoOptions') : _unref(t)('epinio.configurations.bindApps.placeholderWithOptions')\n                }, null, 8, [\"value\", \"loading\", \"disabled\", \"options\", \"mode\", \"placeholder\"])\n              ])\n            ]),\n            _cache[3] || (_cache[3] = _createElementVNode(\"div\", { class: \"spacer\" }, null, -1)),\n            _createElementVNode(\"div\", _hoisted_4, [\n              _createElementVNode(\"div\", _hoisted_5, [\n                _createVNode(KeyValue, {\n                  value: _ctx.value.data,\n                  \"onUpdate:value\": _cache[1] || (_cache[1] = ($event: any) => ((_ctx.value.data) = $event)),\n                  \"initial-empty-row\": true,\n                  mode: _ctx.mode,\n                  title: _unref(t)('epinio.configurations.pairs.label'),\n                  \"title-protip\": _unref(t)('epinio.configurations.pairs.tooltip'),\n                  \"key-label\": _unref(t)('epinio.applications.create.envvar.keyLabel'),\n                  \"value-label\": _unref(t)('epinio.applications.create.envvar.valueLabel'),\n                  valueMarkdownMultiline: true,\n                  \"parse-lines-from-file\": true,\n                  \"parse-value-from-file\": true\n                }, null, 8, [\"value\", \"mode\", \"title\", \"title-protip\", \"key-label\", \"value-label\"])\n              ])\n            ])\n          ]),\n          _: 1,\n          __: [3]\n        }, 8, [\"mode\", \"done-route\", \"resource\", \"errors\", \"validation-passed\"]))\n      : _createCommentVNode(\"\", true)\n}\n}\n\n})","<script setup lang=\"ts\">\nimport { useStore } from 'vuex';\nimport { ref, computed, onMounted, watch } from 'vue';\n\nimport EpinioConfiguration from '../models/configurations';\nimport { useEpinioBindAppsMixin } from './bind-apps-mixin';\nimport { useUnsavedChangesMixin } from './unsaved-changes-mixin';\nimport { epinioExceptionToErrorsArray } from '../utils/errors';\nimport { EPINIO_TYPES, EpinioNamespace } from '../types';\n\nimport { sortBy } from '@shell/utils/sort';\nimport { _EDIT } from '@shell/config/query-params';\nimport Loading from '@shell/components/Loading.vue';\nimport Banner from '@components/Banner/Banner.vue';\nimport KeyValue from '@shell/components/form/KeyValue.vue';\nimport CruResource from '@shell/components/CruResource.vue';\nimport LabeledSelect from '@shell/components/form/LabeledSelect.vue';\nimport NameNsDescription from '@shell/components/form/NameNsDescription.vue';\nimport { validateKubernetesName } from '@shell/utils/validators/kubernetes-name';\n\nconst store = useStore();\nconst t = store.getters['i18n/t'];\n\nconst props = defineProps<{\n  value: EpinioConfiguration,\n  initialValue: EpinioConfiguration,\n  mode: string,\n}>();\n\nconst {\n  doneParams,\n  doneRoute,\n  selectedApps,\n  nsAppOptions,\n  noApps,\n  updateConfigurationAppBindings,\n} = useEpinioBindAppsMixin(props);\n\nconst { setUnsavedChanges } = useUnsavedChangesMixin();\n\nconst errors = ref<Array<any>>([]);\nconst pending = ref<boolean>(true);\nconst validationPassed = ref<boolean>(false);\n\nonMounted(async () => {\n  props.value.meta.namespace = props.initialValue.meta.namespace || \n    namespaces.value[0]?.metadata.name;\n  props.value.data = { ...props.initialValue.configuration?.details };\n  selectedApps.value = [...props.initialValue.configuration?.boundapps || []];\n\n  updateValidation();\n\n  pending.value = false;\n});\n\n// Track changes to mark as unsaved\nwatch([() => props.value, selectedApps], () => {\n  setUnsavedChanges(true);\n}, { deep: true });\n\nconst isEdit = computed(() => {\n  return props.mode === _EDIT;\n});\n\nconst namespaces = computed(() => {\n  return sortBy(store.getters['epinio/all'](EPINIO_TYPES.NAMESPACE), 'name', false);\n});\n\nconst namespaceNames = computed(() => {\n  return namespaces.value.map((n: EpinioNamespace) => n.metadata.name);\n});\n\nconst done = () => {\n  if (!doneRoute) {\n    return;\n  }\n\n  store.$router.replace({\n    name:   doneRoute.value,\n    params: doneParams.value || { resource: props.value.type },\n  });\n}\n\nconst save = async (saveCb: (success: boolean) => void) => {\n  errors.value = [];\n\n  try {\n    if (!isEdit.value) {\n      await props.value.create();\n      await updateConfigurationAppBindings();\n      await store.dispatch(\n        'epinio/findAll', \n        { type: props.value.type, opt: { force: true } },\n      );\n    }\n\n    if (isEdit.value) {\n      await props.value.update();\n      await updateConfigurationAppBindings();\n      await props.value.forceFetch();\n    }\n\n    setUnsavedChanges(false); // Clear unsaved changes after successful save\n    saveCb(true);\n    done();\n  } catch (err) {\n    console.log(err);\n    errors.value = epinioExceptionToErrorsArray(err);\n    saveCb(false);\n  }\n};\n\nconst updateValidation = () => {\n  const nameErrors = validateKubernetesName(\n    props.value?.meta.name || '', \n    t('epinio.namespace.name'), \n    store.getters, \n    undefined, \n    [],\n  );\n  \n  const nsErrors = validateKubernetesName(\n    props.value?.meta.namespace || '', \n    '', \n    store.getters, \n    undefined, \n    [],\n  );\n\n  if (nameErrors.length === 0 && nsErrors.length === 0) {\n    const dataValues = Object.entries(props.value?.data || {});\n    \n    if (!!dataValues.length) { // eslint-disable-line no-extra-boolean-cast\n      validationPassed.value = true;\n      return;\n    }\n  }\n\n  validationPassed.value = false;\n};\n\nwatch(\n  () => props.value.meta.namespace,\n  () => {\n    selectedApps.value = [];\n    updateValidation(); // For when a user is supplying their own ns\n  }\n);\n\nwatch(\n  () => props.value.meta.name,\n  () => {\n    updateValidation();\n  }\n);\n\nwatch(\n  () => props.value.data,\n  () => {\n    updateValidation();\n  },\n  { deep: true }\n);\n</script>\n\n<template>\n  <Loading v-if=\"!value || pending\" />\n  <CruResource\n    v-else-if=\"value\"\n    :min-height=\"'7em'\"\n    :mode=\"mode\"\n    :done-route=\"doneRoute\"\n    :resource=\"value\"\n    :can-yaml=\"false\"\n    :errors=\"errors\"\n    :validation-passed=\"validationPassed\"\n    namespace-key=\"meta.namespace\"\n    @error=\"(e) => (errors = e)\"\n    @finish=\"save\"\n  >\n    <Banner\n      v-if=\"value.isServiceRelated\"\n      color=\"info\"\n    >\n      {{ t('epinio.configurations.tableHeaders.service.tooltip') }}\n    </Banner>\n    <div v-if=\"errors.length > 0\">\n      <Banner\n        v-for=\"(err, i) in errors\"\n        :key=\"i\"\n        color=\"error\"\n        :label=\"err\"\n      />\n    </div>\n    <NameNsDescription\n      name-key=\"name\"\n      namespace-key=\"namespace\"\n      :namespaces-override=\"namespaceNames\"\n      :create-namespace-override=\"true\"\n      :description-hidden=\"true\"\n      :value=\"value.meta\"\n      :mode=\"mode\"\n    />\n    <div class=\"row\">\n      <div class=\"col span-6\">\n        <LabeledSelect\n          v-model:value=\"selectedApps\"\n          :loading=\"pending\"\n          :disabled=\"noApps\"\n          :options=\"nsAppOptions\"\n          :searchable=\"true\"\n          :mode=\"mode\"\n          :multiple=\"true\"\n          :label-key=\"'epinio.configurations.bindApps.label'\"\n          :placeholder=\"noApps ? t('epinio.configurations.bindApps.placeholderNoOptions') : t('epinio.configurations.bindApps.placeholderWithOptions')\"\n        />\n      </div>\n    </div>\n    <div class=\"spacer\" />\n    <div class=\"row\">\n      <div class=\"col span-11\">\n        <KeyValue\n          v-model:value=\"value.data\"\n          :initial-empty-row=\"true\"\n          :mode=\"mode\"\n          :title=\"t('epinio.configurations.pairs.label')\"\n          :title-protip=\"t('epinio.configurations.pairs.tooltip')\"\n          :key-label=\"t('epinio.applications.create.envvar.keyLabel')\"\n          :value-label=\"t('epinio.applications.create.envvar.valueLabel')\"\n          :valueMarkdownMultiline=\"true\"\n          :parse-lines-from-file=\"true\"\n          :parse-value-from-file=\"true\"\n        />\n      </div>\n    </div>\n  </CruResource>\n</template>\n\n<style lang=\"scss\">\n.as-text-area {\n  width: 100% !important;\n}\n\n.value-container .file-selector{\n  margin-bottom: 20px;\n}\n</style>\n","import script from \"./configurations.vue?vue&type=script&setup=true&lang=ts\"\nexport * from \"./configurations.vue?vue&type=script&setup=true&lang=ts\"\n\nimport \"./configurations.vue?vue&type=style&index=0&id=a6491d02&lang=scss\"\n\nconst __exports__ = script;\n\nexport default __exports__","import { defineComponent as _defineComponent } from 'vue'\nimport { openBlock as _openBlock, createBlock as _createBlock, createCommentVNode as _createCommentVNode, unref as _unref, createVNode as _createVNode, withCtx as _withCtx, createElementVNode as _createElementVNode, normalizeClass as _normalizeClass } from \"vue\"\n\nconst _hoisted_1 = { class: \"wizard-container\" }\n\nimport { ref, reactive, computed, onMounted, watch } from 'vue';\nimport { useStore } from 'vuex';\nimport Application from '../models/applications';\nimport CruResource from '@shell/components/CruResource.vue';\nimport ResourceTabs from '@shell/components/form/ResourceTabs/index.vue';\nimport Tab from '@shell/components/Tabbed/Tab.vue';\nimport Loading from '@shell/components/Loading.vue';\nimport AppInfo from '../components/application/AppInfo.vue';\nimport AppConfiguration from '../components/application/AppConfiguration.vue';\nimport { epinioExceptionToErrorsArray } from '../utils/errors';\nimport { useEpinioBindAppsMixin } from './bind-apps-mixin';\nimport { useUnsavedChangesMixin } from './unsaved-changes-mixin';\n\nimport Wizard from '@shell/components/Wizard.vue';\nimport { createEpinioRoute } from '../utils/custom-routing';\nimport AppSource from '../components/application/AppSource.vue';\nimport AppProgress from '../components/application/AppProgress.vue';\nimport { EpinioAppSource, EPINIO_TYPES, EpinioAppInfo, EpinioAppBindings } from '../types';\nimport { allHash } from '@shell/utils/promise';\nimport { _EDIT } from '@shell/config/query-params';\n\n\nexport default /*@__PURE__*/_defineComponent({\n  __name: 'applications',\n  props: {\n    value: {},\n    initialValue: {},\n    mode: {}\n  },\n  setup(__props: any) {\n\nconst props = __props;\n\nconst {\n  doneParams,\n  doneRoute,\n} = useEpinioBindAppsMixin(props);\n\nconst { setUnsavedChanges } = useUnsavedChangesMixin();\n\nconst store = useStore();\n\nconst t = store.getters['i18n/t'];\n\nconst bindings = reactive<EpinioAppBindings>({ configurations: [], services: [] });\nconst source = ref<EpinioAppSource>(props.value.appSource);\nconst errors = ref<string[]>([]);\nconst epinioInfo = ref();\nconst tabErrors = reactive<{ appInfo: boolean }>({ appInfo: false });\n\nconst steps = reactive([\n  {\n    name: 'source',\n    label: t('epinio.applications.steps.source.label'),\n    subtext: t('epinio.applications.steps.source.subtext'),\n    ready: false,\n    nextButton: {\n      labelKey: 'epinio.applications.steps.configurations.update',\n      style: 'btn role-primary bg-warning'\n    }\n  },\n  {\n    name: 'progress',\n    label: t('epinio.applications.steps.progress.label'),\n    subtext: t('epinio.applications.steps.progress.subtext'),\n    ready: false,\n    previousButton: { disable: true }\n  },\n]);\n\nif (source.value.git && store.$router.currentRoute._value.query?.commit) {\n  source.value.git.commit = store.$router.currentRoute._value.query.commit as string;\n}\n\nonMounted(async () => {\n  const hash = await allHash({\n    ns: store.dispatch('epinio/findAll', { type: EPINIO_TYPES.NAMESPACE }),\n    charts: store.dispatch('epinio/findAll', { type: EPINIO_TYPES.APP_CHARTS }),\n    info: store.dispatch('epinio/info'),\n  });\n\n  epinioInfo.value = (hash as { info: any }).info;\n});\n\n// Track changes to mark as unsaved\nwatch([bindings, source], () => {\n  setUnsavedChanges(true);\n}, { deep: true });\n\nconst shouldShowButtons = computed(\n  () => (store.$router.currentRoute.value.hash === '#source' ? 'hide-buttons-deploy' : '')\n);\nconst showSourceTab = computed(() => {\n  return props.mode === _EDIT\n});\nconst validationPassed = computed(() => !Object.values(tabErrors).find((error) => error));\n\nconst done = () => {\n  if (!doneRoute) {\n    return;\n  }\n\n  store.$router.replace({\n    name:   doneRoute.value,\n    params: doneParams.value || { resource: props.value.type },\n  });\n}\n\n\nasync function save(saveCb: (success: boolean) => void) {\n  errors.value = [];\n  try {\n    await props.value.update();\n\n    await props.value.updateConfigurations(\n      props.initialValue.baseConfigurationsNames || [],\n      bindings.configurations || [],\n    );\n\n    await props.value.updateServices(\n      props.initialValue.services || [],\n      bindings.services || [],\n    );\n\n    await props.value.forceFetch();\n    setUnsavedChanges(false); // Clear unsaved changes after successful save\n    saveCb(true);\n    done();\n  } catch (err) {\n    errors.value = epinioExceptionToErrorsArray(err);\n    saveCb(false);\n  }\n}\n\nfunction set(obj: Record<string, any>, changes: Record<string, any>) {\n  Object.entries(changes).forEach(([key, value]) => {\n    obj[key] = value;\n  });\n}\n\nfunction updateInfo(changes: EpinioAppInfo) {\n  props.value.meta = props.value.meta || {};\n  props.value.configuration = props.value.configuration || {};\n  set(props.value.meta, changes.meta);\n  set(props.value.configuration, changes.configuration);\n}\n\nfunction updateConfigurations(changes: EpinioAppBindings) {\n  Object.assign(bindings, changes);\n}\n\nfunction cancel() {\n  store.$router.replace(props.value.listLocation);\n}\n\nfunction finish() {\n  store.$router.replace(createEpinioRoute(`c-cluster-resource-id`, {\n    cluster: store.getters['clusterId'],\n    resource: props.value.type,\n    id: `${props.value.meta.namespace}/${props.value.meta.name}`,\n  }));\n}\n\nfunction updateSource(changes: EpinioAppSource) {\n  source.value = {} as EpinioAppSource;\n  const { appChart, ...cleanChanges } = changes;\n\n  props.value.configuration = props.value.configuration || {};\n\n  if (appChart) {\n    set(props.value.configuration, { appchart: appChart });\n  }\n\n  set(source.value, cleanChanges);\n}\n\nfunction updateManifestConfigurations(changes: string[]) {\n  set(props.value.configuration, { configurations: changes });\n}\n\nfunction validate(value: boolean, tab: string) {\n  if (tab) {\n    tabErrors[tab] = !value;\n  }\n\n  steps[0].ready = value;\n}\n\nreturn (_ctx: any,_cache: any) => {\n  return (!_ctx.value)\n    ? (_openBlock(), _createBlock(Loading, { key: 0 }))\n    : (_openBlock(), _createBlock(CruResource, {\n        key: 1,\n        class: _normalizeClass(shouldShowButtons.value),\n        \"can-yaml\": false,\n        mode: _ctx.mode,\n        resource: _ctx.value,\n        errors: errors.value,\n        \"validation-passed\": validationPassed.value,\n        onError: _cache[2] || (_cache[2] = (e) => errors.value = _unref(epinioExceptionToErrorsArray)(e)),\n        onFinish: save\n      }, {\n        default: _withCtx(() => [\n          _createVNode(ResourceTabs, { mode: \"mode\" }, {\n            default: _withCtx(() => [\n              (showSourceTab.value)\n                ? (_openBlock(), _createBlock(Tab, {\n                    key: 0,\n                    \"label-key\": \"epinio.applications.steps.source.label\",\n                    name: \"source\",\n                    weight: 30\n                  }, {\n                    default: _withCtx(() => [\n                      _createElementVNode(\"div\", _hoisted_1, [\n                        _createVNode(Wizard, {\n                          class: \"wizard\",\n                          steps: steps,\n                          \"banner-title\": _unref(t)('epinio.applications.steps.source.label'),\n                          \"banner-title-subtext\": _unref(t)('epinio.applications.steps.source.subtext'),\n                          \"header-mode\": \"edit\",\n                          \"finish-mode\": \"done\",\n                          \"edit-first-step\": true,\n                          onCancel: cancel,\n                          onFinish: finish\n                        }, {\n                          source: _withCtx(() => [\n                            (source.value)\n                              ? (_openBlock(), _createBlock(AppSource, {\n                                  key: 0,\n                                  application: _ctx.value,\n                                  source: source.value,\n                                  mode: _ctx.mode,\n                                  info: epinioInfo.value,\n                                  onChange: updateSource,\n                                  onChangeAppInfo: updateInfo,\n                                  onChangeAppConfig: updateManifestConfigurations,\n                                  onValid: _cache[0] || (_cache[0] = ($event: any) => (steps[0].ready = $event))\n                                }, null, 8, [\"application\", \"source\", \"mode\", \"info\"]))\n                              : _createCommentVNode(\"\", true)\n                          ]),\n                          progress: _withCtx(({step}) => [\n                            _createVNode(AppProgress, {\n                              application: _ctx.value,\n                              source: source.value,\n                              bindings: bindings,\n                              mode: _ctx.mode,\n                              step: step\n                            }, null, 8, [\"application\", \"source\", \"bindings\", \"mode\", \"step\"])\n                          ]),\n                          _: 1\n                        }, 8, [\"steps\", \"banner-title\", \"banner-title-subtext\"])\n                      ])\n                    ]),\n                    _: 1\n                  }))\n                : _createCommentVNode(\"\", true),\n              _createVNode(Tab, {\n                \"label-key\": \"epinio.applications.steps.basics.label\",\n                name: \"info\",\n                weight: 20,\n                error: tabErrors.appInfo\n              }, {\n                default: _withCtx(() => [\n                  _createVNode(AppInfo, {\n                    application: _ctx.value,\n                    mode: _ctx.mode,\n                    onChange: updateInfo,\n                    onValid: _cache[1] || (_cache[1] = ($event: any) => (validate($event, 'appInfo')))\n                  }, null, 8, [\"application\", \"mode\"])\n                ]),\n                _: 1\n              }, 8, [\"error\"]),\n              _createVNode(Tab, {\n                \"label-key\": \"epinio.applications.steps.configurations.label\",\n                name: \"configurations\",\n                weight: 10\n              }, {\n                default: _withCtx(() => [\n                  _createVNode(AppConfiguration, {\n                    application: _ctx.value,\n                    \"initial-application\": _ctx.initialValue,\n                    mode: _ctx.mode,\n                    onChange: updateConfigurations\n                  }, null, 8, [\"application\", \"initial-application\", \"mode\"])\n                ]),\n                _: 1\n              })\n            ]),\n            _: 1\n          })\n        ]),\n        _: 1\n      }, 8, [\"class\", \"mode\", \"resource\", \"errors\", \"validation-passed\"]))\n}\n}\n\n})","<script lang=\"ts\" setup>\nimport { ref, reactive, computed, onMounted, watch } from 'vue';\nimport { useStore } from 'vuex';\nimport Application from '../models/applications';\nimport CruResource from '@shell/components/CruResource.vue';\nimport ResourceTabs from '@shell/components/form/ResourceTabs/index.vue';\nimport Tab from '@shell/components/Tabbed/Tab.vue';\nimport Loading from '@shell/components/Loading.vue';\nimport AppInfo from '../components/application/AppInfo.vue';\nimport AppConfiguration from '../components/application/AppConfiguration.vue';\nimport { epinioExceptionToErrorsArray } from '../utils/errors';\nimport { useEpinioBindAppsMixin } from './bind-apps-mixin';\nimport { useUnsavedChangesMixin } from './unsaved-changes-mixin';\n\nimport Wizard from '@shell/components/Wizard.vue';\nimport { createEpinioRoute } from '../utils/custom-routing';\nimport AppSource from '../components/application/AppSource.vue';\nimport AppProgress from '../components/application/AppProgress.vue';\nimport { EpinioAppSource, EPINIO_TYPES, EpinioAppInfo, EpinioAppBindings } from '../types';\nimport { allHash } from '@shell/utils/promise';\nimport { _EDIT } from '@shell/config/query-params';\n\nconst props = defineProps<{ \n  value: Application;\n  initialValue: Application;\n  mode: string;\n}>();\n\nconst {\n  doneParams,\n  doneRoute,\n} = useEpinioBindAppsMixin(props);\n\nconst { setUnsavedChanges } = useUnsavedChangesMixin();\n\nconst store = useStore();\n\nconst t = store.getters['i18n/t'];\n\nconst bindings = reactive<EpinioAppBindings>({ configurations: [], services: [] });\nconst source = ref<EpinioAppSource>(props.value.appSource);\nconst errors = ref<string[]>([]);\nconst epinioInfo = ref();\nconst tabErrors = reactive<{ appInfo: boolean }>({ appInfo: false });\n\nconst steps = reactive([\n  {\n    name: 'source',\n    label: t('epinio.applications.steps.source.label'),\n    subtext: t('epinio.applications.steps.source.subtext'),\n    ready: false,\n    nextButton: {\n      labelKey: 'epinio.applications.steps.configurations.update',\n      style: 'btn role-primary bg-warning'\n    }\n  },\n  {\n    name: 'progress',\n    label: t('epinio.applications.steps.progress.label'),\n    subtext: t('epinio.applications.steps.progress.subtext'),\n    ready: false,\n    previousButton: { disable: true }\n  },\n]);\n\nif (source.value.git && store.$router.currentRoute._value.query?.commit) {\n  source.value.git.commit = store.$router.currentRoute._value.query.commit as string;\n}\n\nonMounted(async () => {\n  const hash = await allHash({\n    ns: store.dispatch('epinio/findAll', { type: EPINIO_TYPES.NAMESPACE }),\n    charts: store.dispatch('epinio/findAll', { type: EPINIO_TYPES.APP_CHARTS }),\n    info: store.dispatch('epinio/info'),\n  });\n\n  epinioInfo.value = (hash as { info: any }).info;\n});\n\n// Track changes to mark as unsaved\nwatch([bindings, source], () => {\n  setUnsavedChanges(true);\n}, { deep: true });\n\nconst shouldShowButtons = computed(\n  () => (store.$router.currentRoute.value.hash === '#source' ? 'hide-buttons-deploy' : '')\n);\nconst showSourceTab = computed(() => {\n  return props.mode === _EDIT\n});\nconst validationPassed = computed(() => !Object.values(tabErrors).find((error) => error));\n\nconst done = () => {\n  if (!doneRoute) {\n    return;\n  }\n\n  store.$router.replace({\n    name:   doneRoute.value,\n    params: doneParams.value || { resource: props.value.type },\n  });\n}\n\n\nasync function save(saveCb: (success: boolean) => void) {\n  errors.value = [];\n  try {\n    await props.value.update();\n\n    await props.value.updateConfigurations(\n      props.initialValue.baseConfigurationsNames || [],\n      bindings.configurations || [],\n    );\n\n    await props.value.updateServices(\n      props.initialValue.services || [],\n      bindings.services || [],\n    );\n\n    await props.value.forceFetch();\n    setUnsavedChanges(false); // Clear unsaved changes after successful save\n    saveCb(true);\n    done();\n  } catch (err) {\n    errors.value = epinioExceptionToErrorsArray(err);\n    saveCb(false);\n  }\n}\n\nfunction set(obj: Record<string, any>, changes: Record<string, any>) {\n  Object.entries(changes).forEach(([key, value]) => {\n    obj[key] = value;\n  });\n}\n\nfunction updateInfo(changes: EpinioAppInfo) {\n  props.value.meta = props.value.meta || {};\n  props.value.configuration = props.value.configuration || {};\n  set(props.value.meta, changes.meta);\n  set(props.value.configuration, changes.configuration);\n}\n\nfunction updateConfigurations(changes: EpinioAppBindings) {\n  Object.assign(bindings, changes);\n}\n\nfunction cancel() {\n  store.$router.replace(props.value.listLocation);\n}\n\nfunction finish() {\n  store.$router.replace(createEpinioRoute(`c-cluster-resource-id`, {\n    cluster: store.getters['clusterId'],\n    resource: props.value.type,\n    id: `${props.value.meta.namespace}/${props.value.meta.name}`,\n  }));\n}\n\nfunction updateSource(changes: EpinioAppSource) {\n  source.value = {} as EpinioAppSource;\n  const { appChart, ...cleanChanges } = changes;\n\n  props.value.configuration = props.value.configuration || {};\n\n  if (appChart) {\n    set(props.value.configuration, { appchart: appChart });\n  }\n\n  set(source.value, cleanChanges);\n}\n\nfunction updateManifestConfigurations(changes: string[]) {\n  set(props.value.configuration, { configurations: changes });\n}\n\nfunction validate(value: boolean, tab: string) {\n  if (tab) {\n    tabErrors[tab] = !value;\n  }\n\n  steps[0].ready = value;\n}\n</script>\n\n\n<template>\n  <Loading v-if=\"!value\" />\n  <CruResource\n    v-else\n    :class=\"shouldShowButtons\"\n    :can-yaml=\"false\"\n    :mode=\"mode\"\n    :resource=\"value\"\n    :errors=\"errors\"\n    :validation-passed=\"validationPassed\"\n    @error=\"(e : Error) => errors = epinioExceptionToErrorsArray(e)\"\n    @finish=\"save\"\n  >\n    <ResourceTabs\n      mode=\"mode\"\n    >\n      <Tab\n        v-if=\"showSourceTab\"\n        label-key=\"epinio.applications.steps.source.label\"\n        name=\"source\"\n        :weight=\"30\"\n      >\n        <div class=\"wizard-container\">\n          <Wizard\n            class=\"wizard\"\n            :steps=\"steps\"\n            :banner-title=\"t('epinio.applications.steps.source.label')\"\n            :banner-title-subtext=\"t('epinio.applications.steps.source.subtext')\"\n            header-mode=\"edit\"\n            finish-mode=\"done\"\n            :edit-first-step=\"true\"\n            @cancel=\"cancel\"\n            @finish=\"finish\"\n          >\n            <template #source>\n              <AppSource\n                v-if=\"source\"\n                :application=\"value\"\n                :source=\"source\"\n                :mode=\"mode\"\n                :info=\"epinioInfo\"\n                @change=\"updateSource\"\n                @changeAppInfo=\"updateInfo\"\n                @changeAppConfig=\"updateManifestConfigurations\"\n                @valid=\"steps[0].ready = $event\"\n              />\n            </template>\n            <template #progress=\"{step}\">\n              <AppProgress\n                :application=\"value\"\n                :source=\"source\"\n                :bindings=\"bindings\"\n                :mode=\"mode\"\n                :step=\"step\"\n              />\n            </template>\n          </Wizard>\n        </div>\n      </Tab>\n      \n      <Tab\n        label-key=\"epinio.applications.steps.basics.label\"\n        name=\"info\"\n        :weight=\"20\"\n        :error=\"tabErrors.appInfo\"\n      >\n        <AppInfo\n          :application=\"value\"\n          :mode=\"mode\"\n          @change=\"updateInfo\"\n          @valid=\"validate($event, 'appInfo')\"\n        />\n      </Tab>\n      <Tab\n        label-key=\"epinio.applications.steps.configurations.label\"\n        name=\"configurations\"\n        :weight=\"10\"\n      >\n        <AppConfiguration\n          :application=\"value\"\n          :initial-application=\"initialValue\"\n          :mode=\"mode\"\n          @change=\"updateConfigurations\"\n        />\n      </Tab>\n    </ResourceTabs>\n  </CruResource>\n</template>\n\n<style lang='scss' scoped>\n\n.wizard-container {\n  position: relative;\n\n  margin-bottom: -20px;\n  margin-right: -20px;\n\n  .wizard {\n    position: relative;\n    overflow: auto;\n\n    // This is a hack and is needed as the wizard's buttons are now `position: absolute; bottom: 0;` so appears over wizard content\n    // In the dashabord app chart install wizard this is applied to specific content winthin the wizard (scroll__content)\n    // We applied the same thing here\n    // Both places need to be removed and the padding added within the wizard component\n    .appSource, .progress-container {\n      padding-bottom: 75px;\n    }\n  }\n}\n\n</style>\n\n<style lang=\"scss\">\n.hide-buttons-deploy {\n  .cru__footer {\n    display: none !important;\n  }\n}\n\n</style>\n","import script from \"./applications.vue?vue&type=script&lang=ts&setup=true\"\nexport * from \"./applications.vue?vue&type=script&lang=ts&setup=true\"\n\nimport \"./applications.vue?vue&type=style&index=0&id=187e0c31&lang=scss&scoped=true\"\nimport \"./applications.vue?vue&type=style&index=1&id=187e0c31&lang=scss\"\n\nimport exportComponent from \"../../../node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['__scopeId',\"data-v-187e0c31\"]])\n\nexport default __exports__","// Imports\nimport ___CSS_LOADER_API_NO_SOURCEMAP_IMPORT___ from \"../../../node_modules/css-loader/dist/runtime/noSourceMaps.js\";\nimport ___CSS_LOADER_API_IMPORT___ from \"../../../node_modules/css-loader/dist/runtime/api.js\";\nvar ___CSS_LOADER_EXPORT___ = ___CSS_LOADER_API_IMPORT___(___CSS_LOADER_API_NO_SOURCEMAP_IMPORT___);\n// Module\n___CSS_LOADER_EXPORT___.push([module.id, \".as-text-area{width:100%!important}.value-container .file-selector{margin-bottom:20px}\", \"\"]);\n// Exports\nexport default ___CSS_LOADER_EXPORT___;\n","// style-loader: Adds some css to the DOM by adding a <style> tag\n\n// load the styles\nvar content = require(\"!!../../../node_modules/css-loader/dist/cjs.js??clonedRuleSet-23.use[1]!../../../node_modules/vue-loader/dist/stylePostLoader.js!../../../node_modules/postcss-loader/dist/cjs.js??clonedRuleSet-23.use[2]!../../../node_modules/postcss-loader/dist/cjs.js??clonedRuleSet-23.use[3]!../../../node_modules/sass-loader/dist/cjs.js??clonedRuleSet-23.use[4]!../../../node_modules/cache-loader/dist/cjs.js??ruleSet[0].use[0]!../../../node_modules/vue-loader/dist/index.js??ruleSet[0].use[1]!./applications.vue?vue&type=style&index=0&id=187e0c31&lang=scss&scoped=true\");\nif(content.__esModule) content = content.default;\nif(typeof content === 'string') content = [[module.id, content, '']];\nif(content.locals) module.exports = content.locals;\n// add the styles to the DOM\nvar add = require(\"!../../../node_modules/vue-style-loader/lib/addStylesClient.js\").default\nvar update = add(\"3fec1564\", content, true, {\"sourceMap\":false,\"shadowMode\":false});","// style-loader: Adds some css to the DOM by adding a <style> tag\n\n// load the styles\nvar content = require(\"!!../../../node_modules/css-loader/dist/cjs.js??clonedRuleSet-23.use[1]!../../../node_modules/vue-loader/dist/stylePostLoader.js!../../../node_modules/postcss-loader/dist/cjs.js??clonedRuleSet-23.use[2]!../../../node_modules/postcss-loader/dist/cjs.js??clonedRuleSet-23.use[3]!../../../node_modules/sass-loader/dist/cjs.js??clonedRuleSet-23.use[4]!../../../node_modules/cache-loader/dist/cjs.js??ruleSet[0].use[0]!../../../node_modules/vue-loader/dist/index.js??ruleSet[0].use[1]!./applications.vue?vue&type=style&index=1&id=187e0c31&lang=scss\");\nif(content.__esModule) content = content.default;\nif(typeof content === 'string') content = [[module.id, content, '']];\nif(content.locals) module.exports = content.locals;\n// add the styles to the DOM\nvar add = require(\"!../../../node_modules/vue-style-loader/lib/addStylesClient.js\").default\nvar update = add(\"69fa643c\", content, true, {\"sourceMap\":false,\"shadowMode\":false});","// style-loader: Adds some css to the DOM by adding a <style> tag\n\n// load the styles\nvar content = require(\"!!../../../node_modules/css-loader/dist/cjs.js??clonedRuleSet-23.use[1]!../../../node_modules/vue-loader/dist/stylePostLoader.js!../../../node_modules/postcss-loader/dist/cjs.js??clonedRuleSet-23.use[2]!../../../node_modules/postcss-loader/dist/cjs.js??clonedRuleSet-23.use[3]!../../../node_modules/sass-loader/dist/cjs.js??clonedRuleSet-23.use[4]!../../../node_modules/cache-loader/dist/cjs.js??ruleSet[0].use[0]!../../../node_modules/vue-loader/dist/index.js??ruleSet[0].use[1]!./configurations.vue?vue&type=style&index=0&id=a6491d02&lang=scss\");\nif(content.__esModule) content = content.default;\nif(typeof content === 'string') content = [[module.id, content, '']];\nif(content.locals) module.exports = content.locals;\n// add the styles to the DOM\nvar add = require(\"!../../../node_modules/vue-style-loader/lib/addStylesClient.js\").default\nvar update = add(\"fd2fd2e4\", content, true, {\"sourceMap\":false,\"shadowMode\":false});","// Imports\nimport ___CSS_LOADER_API_NO_SOURCEMAP_IMPORT___ from \"../../../node_modules/css-loader/dist/runtime/noSourceMaps.js\";\nimport ___CSS_LOADER_API_IMPORT___ from \"../../../node_modules/css-loader/dist/runtime/api.js\";\nvar ___CSS_LOADER_EXPORT___ = ___CSS_LOADER_API_IMPORT___(___CSS_LOADER_API_NO_SOURCEMAP_IMPORT___);\n// Module\n___CSS_LOADER_EXPORT___.push([module.id, \".wizard-container[data-v-187e0c31]{position:relative;margin-bottom:-20px;margin-right:-20px}.wizard-container .wizard[data-v-187e0c31]{position:relative;overflow:auto}.wizard-container .wizard .appSource[data-v-187e0c31],.wizard-container .wizard .progress-container[data-v-187e0c31]{padding-bottom:75px}\", \"\"]);\n// Exports\nexport default ___CSS_LOADER_EXPORT___;\n"],"names":["___CSS_LOADER_EXPORT___","push","module","id","_hoisted_1","key","_hoisted_2","class","_hoisted_3","_hoisted_4","_hoisted_5","_defineComponent","__name","props","value","initialValue","mode","setup","__props","store","useStore","t","getters","doneParams","doneRoute","selectedApps","nsAppOptions","noApps","updateConfigurationAppBindings","useEpinioBindAppsMixin","setUnsavedChanges","useUnsavedChangesMixin","errors","ref","pending","validationPassed","onMounted","async","meta","namespace","namespaces","metadata","name","data","configuration","details","boundapps","updateValidation","watch","deep","isEdit","computed","_EDIT","sortBy","EPINIO_TYPES","NAMESPACE","namespaceNames","map","n","done","$router","replace","params","resource","type","save","create","dispatch","opt","force","update","forceFetch","saveCb","err","console","log","epinioExceptionToErrorsArray","nameErrors","validateKubernetesName","undefined","nsErrors","length","dataValues","Object","entries","_ctx","_cache","_openBlock","_createBlock","Loading","CruResource","_unref","onError","e","onFinish","default","_withCtx","isServiceRelated","Banner","color","_createTextVNode","_toDisplayString","_","_createCommentVNode","_createElementBlock","_Fragment","_renderList","i","label","_createVNode","NameNsDescription","_createElementVNode","LabeledSelect","$event","_isRef","loading","disabled","options","searchable","multiple","placeholder","KeyValue","title","valueMarkdownMultiline","__","__exports__","bindings","reactive","configurations","services","source","appSource","epinioInfo","tabErrors","appInfo","steps","subtext","ready","nextButton","labelKey","style","previousButton","disable","git","currentRoute","_value","query","commit","hash","allHash","ns","charts","APP_CHARTS","info","shouldShowButtons","showSourceTab","values","find","error","updateConfigurations","baseConfigurationsNames","updateServices","set","obj","changes","forEach","updateInfo","assign","cancel","listLocation","finish","createEpinioRoute","cluster","updateSource","appChart","cleanChanges","appchart","updateManifestConfigurations","validate","tab","_normalizeClass","ResourceTabs","Tab","weight","Wizard","onCancel","AppSource","application","onChange","onChangeAppInfo","onChangeAppConfig","onValid","progress","step","AppProgress","AppInfo","AppConfiguration","content","__esModule","locals","exports","add"],"sourceRoot":""}