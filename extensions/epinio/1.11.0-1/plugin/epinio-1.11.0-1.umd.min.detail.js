(("undefined"!==typeof self?self:this)["webpackJsonpepinio_1_11_0_1"]=("undefined"!==typeof self?self:this)["webpackJsonpepinio_1_11_0_1"]||[]).push([[0],{"02f6":function(e,t,a){"use strict";a.r(t);var i=function(){var e=this,t=e._self._c;e._self._setupProxy;return t("div",{staticClass:"content"},[t("div",{staticClass:"application-details"},[t("ApplicationCard",{scopedSlots:e._u([{key:"cardIcon",fn:function(){return[t("i",{staticClass:"icon icon-fw",class:e.sourceIcon})]},proxy:!0},{key:"top-left",fn:function(){return[t("h1",[e._v("Routes")]),t("ul",e._l(e.value.configuration.routes,(function(a){return t("li",{key:a.id},["running"===e.value.state?t("a",{key:a.id+"a",attrs:{href:"https://"+a,target:"_blank",rel:"noopener noreferrer nofollow"}},[e._v(e._s("https://"+a))]):t("span",{key:a.id+"b"},[e._v(e._s("https://"+a))])])})),0)]},proxy:!0},{key:"resourcesCount",fn:function(){return[t("div",[e._v(" "+e._s(e.value.envCount)+" "+e._s(e.t("epinio.applications.detail.counts.envVars"))+" ")]),t("div",[e._v(" "+e._s(e.value.serviceConfigurations.length)+" "+e._s(e.t("epinio.applications.detail.counts.services"))+" ")]),t("div",[e._v(" "+e._s(e.value.baseConfigurations.length)+" "+e._s(e.t("epinio.applications.detail.counts.config"))+" ")])]},proxy:!0}])})],1),e.value.deployment?t("h3",{staticClass:"mt-20"},[e._v(" "+e._s(e.t("epinio.applications.detail.deployment.label"))+" ")]):e._e(),e.value.deployment?t("div",{staticClass:"deployment"},[t("Tabbed",[t("Tab",{attrs:{"label-key":"epinio.applications.detail.tables.overview",name:"overview",weight:3}},[t("div",{staticClass:"simple-box-row app-instances"},[t("SimpleBox",[t("ConsumptionGauge",{attrs:{"resource-name":e.t("epinio.applications.detail.deployment.instances"),capacity:e.value.desiredInstances,used:e.value.readyInstances,"used-as-resource-name":!0,"color-stops":{70:"--success",30:"--warning",0:"--error"}}}),t("div",{staticClass:"scale-instances"},[t("PlusMinus",{staticClass:"mt-15 mb-10",attrs:{value:e.value.desiredInstances,disabled:e.saving},on:{minus:function(t){return e.updateInstances(e.value.desiredInstances-1)},plus:function(t){return e.updateInstances(e.value.desiredInstances+1)}}})],1),t("div",{staticClass:"deployment__origin__row"},[t("hr",{staticClass:"mt-10 mb-10"}),t("h4",{staticClass:"mt-10 mb-10"},[e._v(" "+e._s(e.t("epinio.applications.detail.deployment.metrics"))+" ")]),e.gitSource?t("div",{staticClass:"stats"},[t("div",[t("h3",[e._v(e._s(e.t("tableHeaders.memory")))]),t("ul",[t("li",[t("span",[e._v("Min: ")]),e._v(" "+e._s(e.value.instanceMemory.min))]),t("li",[t("span",[e._v("Max: ")]),e._v(e._s(e.value.instanceMemory.max))]),t("li",[t("span",[e._v("Avg: ")]),e._v(e._s(e.value.instanceMemory.avg))])])]),t("div",[t("h3",[e._v(e._s(e.t("tableHeaders.cpu")))]),t("ul",[t("li",[t("span",[e._v("Min: ")]),e._v(" "+e._s(e.value.instanceCpu.min))]),t("li",[t("span",[e._v("Max: ")]),e._v(e._s(e.value.instanceCpu.max))]),t("li",[t("span",[e._v("Avg: ")]),e._v(e._s(e.value.instanceCpu.avg))])])])]):t("div",{staticClass:"stats-table"},[t("table",{staticClass:"mt-15"},[t("thead",[t("tr",[t("th"),t("th",[e._v("Min")]),t("th",[e._v("Max")]),t("th",[e._v("Avg")])])]),t("tr",[t("td",[e._v(e._s(e.t("tableHeaders.memory")))]),t("td",[e._v(e._s(e.value.instanceMemory.min))]),t("td",[e._v(e._s(e.value.instanceMemory.max))]),t("td",[e._v(e._s(e.value.instanceMemory.avg))])]),t("tr",[t("td",[e._v(e._s(e.t("tableHeaders.cpu")))]),t("td",[e._v(e._s(e.value.instanceCpu.min))]),t("td",[e._v(e._s(e.value.instanceCpu.max))]),t("td",[e._v(e._s(e.value.instanceCpu.avg))])])])])])],1),e.value.appSourceInfo?t("SimpleBox",[t("div",{staticClass:"mb-10 deployment__details__header"},[e.value.appSourceInfo.kind===e.APPLICATION_MANIFEST_SOURCE_TYPE.GIT?t("i",{staticClass:"icon git-icon",class:{["icon-"+e.gitType]:!0}}):e._e(),t("h4",[e._v(e._s(e.t("epinio.applications.detail.deployment.details.label")))])]),e.gitSource?t("div",{staticClass:"repo-info"},[t("AppGitDeployment",{attrs:{"git-deployment":e.gitDeployment,"git-source":e.gitSource,"commit-position":e.commitPosition}})],1):e._e(),t("hr",{staticClass:"mt-10 mb-10"}),t("div",{staticClass:"deployment__origin__list"},[t("ul",[t("li",[t("h4",[e._v(e._s(e.t("epinio.applications.detail.deployment.details.origin")))]),t("span",[e._v(e._s(e.value.appSourceInfo.label))])]),e._l(e.value.appSourceInfo.details,(function(a){return t("li",{key:a.label},[t("h4",[e._v(e._s(a.label))]),a.value&&a.value.startsWith("http")?t("span",[t("a",{attrs:{href:a.value,target:"_blank"}},[e._v(e._s(e.formatURL(a.value)))])]):e.gitSource&&a.value&&a.value.match(/^[a-f0-9]{40}$/)?t("span",[t("a",{attrs:{href:`${e.gitSource.htmlUrl}/commit/${a.value}`,target:"_blank"}},[e._v(e._s(a.value))])]):t("span",[e._v(e._s(a.value))])])})),t("li",[t("h4",[e._v(e._s(e.t("epinio.applications.tableHeaders.deployedBy")))]),t("span",[e._v(" "+e._s(e.value.deployment.username))])])],2)])]):e._e()],1)]),e.gitSource&&e.preparedCommits.length?t("Tab",{attrs:{"label-key":"epinio.applications.detail.tables.gitCommits",name:"gitCommits",weight:2}},[e.preparedCommits?t("SortableTable",{attrs:{rows:e.preparedCommits,headers:e.commitsHeaders,mode:"view","key-field":"sha",search:!0,paging:!0,"table-actions":!1,"rows-per-page":10},scopedSlots:e._u([{key:"header-left",fn:function(){return[t("Banner",{staticClass:"redeploy-info",attrs:{color:"info"}},[e._v(" "+e._s(e.t("epinio.applications.detail.deployment.commits.redeploy"))+" ")])]},proxy:!0},{key:"cell:author",fn:function({row:a}){return[t("div",{staticClass:"sortable-table-avatar"},[a.author?[t("img",{attrs:{src:a.author.avatarUrl,alt:""}}),t("a",{attrs:{href:a.author.htmlUrl,target:"_blank",rel:"nofollow noopener noreferrer"}},[e._v(" "+e._s(a.author.name)+" ")])]:[e._v(" "+e._s(e.t(`gitPicker.${e.gitType}.tableHeaders.author.unknown`))+" ")]],2)]}},{key:"cell:sha",fn:function({row:a}){return[t("div",{staticClass:"sortable-table-commit"},[t("Link",{attrs:{row:a,"url-key":"htmlUrl",value:a.sha}}),a.commitId===e.gitDeployment.deployedCommit.long?t("i",{directives:[{name:"tooltip",rawName:"v-tooltip",value:e.t("epinio.applications.detail.deployment.details.git.deployed"),expression:"t('epinio.applications.detail.deployment.details.git.deployed')"}],staticClass:"icon icon-fw icon-commit"}):e._e()],1)]}}],null,!1,4243467417)}):e._e()],1):e._e()],1)],1):e._e(),t("h3",{staticClass:"mt-20"},[e._v(" "+e._s(e.t("epinio.applications.detail.tables.label"))+" ")]),t("div",[t("Tabbed",[t("Tab",{attrs:{"label-key":"epinio.applications.detail.tables.instances",name:"instances",weight:3}},[t("ResourceTable",{attrs:{schema:e.appInstance.schema,headers:e.appInstance.headers,rows:e.value.instances,"table-actions":!1}})],1),t("Tab",{attrs:{"label-key":"epinio.applications.detail.tables.services",name:"services",weight:2}},[t("ResourceTable",{attrs:{schema:e.services.schema,headers:e.services.headers,rows:e.value.services,namespaced:!1,"table-actions":!1}})],1),t("Tab",{attrs:{"label-key":"epinio.applications.detail.tables.configs",name:"configs",weight:1}},[t("ResourceTable",{attrs:{schema:e.configs.schema,headers:e.configs.headers,rows:e.value.baseConfigurations,namespaced:!1,"table-actions":!1}})],1)],1)],1)])},s=[],o=a("050d"),n=a.n(o),l=a("be6d"),r=a.n(l),d=a("8bbf"),p=a.n(d),c=a("f1ea"),m=a("dae5"),u=a("90cd"),f=a("126f"),v=a("2775"),h=a("84f3"),_=a("8da1"),g=a("0cb2"),b=a("38de"),y=a("0fb1"),x=function(){var e=this,t=e._self._c;return t("div",{staticClass:"repo-info"},[t("div",{staticClass:"repo-info-owner"},[t("img",{attrs:{src:e.gitSource.owner.avatarUrl,alt:""}}),t("div",[t("a",{ref:"nofollow",attrs:{target:"_blank",href:e.gitSource.owner.htmlUrl}},[e._v(e._s(e.gitSource.owner.name))]),t("span",[e._v("/")]),t("a",{ref:"nofollow",attrs:{target:"_blank",href:e.gitSource.htmlUrl}},[e._v(e._s(e.gitSource.name))])])]),e.gitDeployment.deployedCommit?t("div",{staticClass:"repo-info-revision"},[t("span",[t("i",{staticClass:"icon icon-fw icon-commit"}),e._v(" "+e._s(e.gitDeployment.deployedCommit.short)+" ")]),e.commitPosition?t("span",{staticClass:"masthead-state badge-state"},[t("i",{staticClass:"icon icon-fw icon-commit"}),e._v(" "+e._s(e.commitPosition.text)+" ")]):e._e()]):e._e(),e.gitSource.description?t("div",{staticClass:"repo-info-description"},[t("i",{staticClass:"icon icon-fw icon-comment"}),t("p",[e._v(" "+e._s(e.gitSource.description)+" ")])]):e._e(),t("ul",[t("li",[t("span",[e._v(e._s(e.t("epinio.applications.detail.deployment.details.git.created")))]),e._v(": "+e._s(e.formatDate(e.gitSource.created_at))+" ")]),t("li",[t("span",[e._v(e._s(e.t("epinio.applications.detail.deployment.details.git.updated")))]),e._v(": "+e._s(e.formatDate(e.gitSource.updated_at,!0))+" ")])])])},w=[],C={props:{gitSource:{default:null,type:Object},commitPosition:{default:null,type:Object},gitDeployment:{default:null,type:Object}},methods:{formatDate(e,t){return n.a.extend(r.a),t?n()(e).fromNow():n()(e).format("DD MMM YYYY")}}},S=C,I=(a("e7df"),a("d802")),T=Object(I["a"])(S,x,w,!1,null,"4e160afc",null),k=T.exports,A=a("3121"),$=a("a144"),M=a("bddd"),D=a("eb32"),O=p.a.extend({components:{Banner:D["a"],SimpleBox:c["a"],ConsumptionGauge:m["a"],SortableTable:y["b"],ResourceTable:f["a"],PlusMinus:v["a"],ApplicationCard:_["a"],AppGitDeployment:k,Tabbed:g["a"],Tab:b["a"],Link:A["a"]},props:{value:{type:Object,required:!0},initialValue:{type:Object,required:!0},mode:{type:String,required:!0}},async fetch(){this.$store.dispatch("epinio/findAll",{type:u["h"].SERVICE_INSTANCE}),this.$store.dispatch("epinio/findAll",{type:u["h"].CONFIGURATION}),this.value.appSource.git&&(await this.fetchRepoDetails(),this.setCommitDetails())},data(){const e=this.$store.getters[u["f"]+"/schemaFor"](u["h"].APP_INSTANCE),t=this.$store.getters[u["f"]+"/schemaFor"](u["h"].SERVICE_INSTANCE),a=this.$store.getters["type-map/headersFor"](t),i=this.$store.getters[u["f"]+"/schemaFor"](u["h"].CONFIGURATION),s=this.$store.getters["type-map/headersFor"](i);return{APPLICATION_MANIFEST_SOURCE_TYPE:u["b"],saving:!1,gitSource:null,gitDeployment:{deployedCommit:"",commits:null},appInstance:{schema:e,headers:this.$store.getters["type-map/headersFor"](e)},services:{schema:t,headers:a.filter(e=>!["namespace","boundApps"].includes(e.name))},configs:{schema:i,headers:s.filter(e=>!["namespace","boundApps","service"].includes(e.name))},commitActions:[{action:"editFromCommit",label:this.t("epinio.applications.actions.editFromCommit.label"),icon:"icon icon-edit",enabled:!0}]}},methods:{async updateInstances(e){this.$set(this,"saving",!0);try{this.value.configuration.instances=e,await this.value.update(),await this.value.forceFetch()}catch(t){console.error("Failed to scale Application: ",Object(h["a"])(t))}this.$set(this,"saving",!1)},formatURL(e){const t=e.match("^(https|git)(://|@)([^/:]+)[/:]([^/:]+)/(.+)(.git)*$");return`${null===t||void 0===t?void 0:t[4]}/${null===t||void 0===t?void 0:t[5]}`},async fetchRepoDetails(){const{usernameOrOrg:e,repo:t}=this.value.appSource.git,a=await this.$store.dispatch(this.gitType+"/fetchRepoDetails",{username:e,repo:t});this.gitSource=$["a"][this.gitType].normalize.repo(a),await this.fetchCommits()},async fetchCommits(){const{usernameOrOrg:e,repo:t,branch:a}=this.value.appSource.git;null!==a&&void 0!==a&&a.name&&(this.gitDeployment.commits=await this.$store.dispatch(this.gitType+"/fetchCommits",{username:e,repo:t,branch:a}))},setCommitDetails(){var e;const{commit:t}=this.value.appSource.git,a=this.preparedCommits.find(e=>e.commitId===t)||this.orderedCommits[0];this.gitDeployment.deployedCommit={short:null===a||void 0===a||null===(e=a.commitId)||void 0===e?void 0:e.slice(0,7),long:a.commitId}},formatDate(e,t){return n.a.extend(r.a),t?n()(e).fromNow():n()(e).format("DD MMM YYYY")}},computed:{gitType(){var e;return(null===(e=this.value.appSource)||void 0===e?void 0:e.type)||null},preparedCommits(){const e=this.gitDeployment.commits;if(!e)return[];const t=Object(M["g"])(e)?e:[e];return t.map(e=>({...$["a"][this.gitType].normalize.commit(e),availableActions:this.commitActions,editFromCommit:()=>this.value.goToEdit({commit:e.sha||e.id})}))},commitsHeaders(){return[{name:"sha",label:this.t(`gitPicker.${this.gitType}.tableHeaders.sha.label`),width:100},{name:"author",label:this.t(`gitPicker.${this.gitType}.tableHeaders.author.label`),width:190,value:"author.login",sort:"author.login"},{name:"message",label:this.t(`gitPicker.${this.gitType}.tableHeaders.message.label`),value:"message",sort:"message"},{name:"date",width:220,label:this.t(`gitPicker.${this.gitType}.tableHeaders.date.label`),value:"date",sort:["date:desc"],formatter:"Date",defaultSort:!0}]},sourceIcon(){var e;return(null===(e=this.value.appSourceInfo)||void 0===e?void 0:e.icon)||"icon-epinio"},commitPosition(){if(!this.preparedCommits.length&&!this.gitDeployment.deployedCommit)return;let e=null;return this.preparedCommits&&this.preparedCommits.map((t,a)=>{var i,s;t.commitId===(null===(i=this.gitDeployment)||void 0===i||null===(s=i.deployedCommit)||void 0===s?void 0:s.long)&&(e=a-1)}),e?{text:e-1>=0?`${e} ${this.t("epinio.applications.gitSource.behindCommits")}`:this.t("epinio.applications.gitSource.latestCommit"),position:e}:null}}}),P=O,N=(a("6f7e"),Object(I["a"])(P,i,s,!1,null,"5e38ef3d",null));t["default"]=N.exports},"1b11":function(e,t,a){var i=a("5eaa");t=i(!1),t.push([e.i,".application-card[data-v-4e160afc]{margin-top:0!important}.repo-info[data-v-4e160afc]{display:grid;grid-auto-columns:minmax(0,1fr);grid-gap:20px;font-size:14px}.repo-info-owner[data-v-4e160afc]{display:flex;align-self:center}.repo-info-owner a[data-v-4e160afc]{font-size:16px!important}.repo-info-owner img[data-v-4e160afc]{margin-right:8px;align-self:center;width:20px;border-radius:5%}.repo-info-owner span[data-v-4e160afc]{opacity:.5}.repo-info-description[data-v-4e160afc],.repo-info-revision[data-v-4e160afc]{display:flex;align-items:center;align-self:center}.repo-info-description i[data-v-4e160afc],.repo-info-revision i[data-v-4e160afc]{opacity:.8}.repo-info-description span[data-v-4e160afc],.repo-info-revision span[data-v-4e160afc]{display:flex;align-self:center}.repo-info-revision[data-v-4e160afc],.repo-info ul[data-v-4e160afc]{justify-content:space-between}.repo-info ul[data-v-4e160afc]{margin:0;padding:0;list-style:none;display:flex}.repo-info ul li[data-v-4e160afc]{font-size:14px;opacity:.5}.repo-info ul li span[data-v-4e160afc]{color:var(--default-text)}",""]),e.exports=t},"32a0":function(e,t,a){var i=a("1b11");i.__esModule&&(i=i.default),"string"===typeof i&&(i=[[e.i,i,""]]),i.locals&&(e.exports=i.locals);var s=a("0ed3").default;s("29646c51",i,!0,{sourceMap:!1,shadowMode:!1})},"6f7e":function(e,t,a){"use strict";a("7cbe")},"7cbe":function(e,t,a){var i=a("f13c");i.__esModule&&(i=i.default),"string"===typeof i&&(i=[[e.i,i,""]]),i.locals&&(e.exports=i.locals);var s=a("0ed3").default;s("3b94dadf",i,!0,{sourceMap:!1,shadowMode:!1})},"975f":function(e,t,a){"use strict";a.r(t);var i=function(){var e=this,t=e._self._c;e._self._setupProxy;return t("div",[t("h2",{staticClass:"mt-20"},[e._v(" "+e._s(e.t("epinio.catalogService.detail.servicesTitle",{catalogService:e.value.name}))+" ")]),t("ResourceTable",{attrs:{schema:e.servicesSchema,rows:e.value.services,loading:e.$fetchState.pending,headers:e.servicesHeaders}})],1)},s=[],o=a("8bbf"),n=a.n(o),l=a("90cd"),r=a("126f"),d=n.a.extend({components:{ResourceTable:r["a"]},props:{value:{type:Object,required:!0}},async fetch(){await this.$store.dispatch("epinio/findAll",{type:l["h"].SERVICE_INSTANCE})},data(){const e=this.$store.getters[l["f"]+"/schemaFor"](l["h"].SERVICE_INSTANCE),t=this.$store.getters["type-map/headersFor"](e);return{servicesSchema:e,servicesHeaders:t}}}),p=d,c=a("d802"),m=Object(c["a"])(p,i,s,!1,null,null,null);t["default"]=m.exports},e7df:function(e,t,a){"use strict";a("32a0")},f13c:function(e,t,a){var i=a("5eaa");t=i(!1),t.push([e.i,'.content[data-v-5e38ef3d]{max-width:1600px}.simple-box-row[data-v-5e38ef3d]{display:grid;grid-auto-columns:minmax(0,1fr);grid-auto-flow:column;grid-gap:10px}@media only screen and (max-width:992px){.simple-box-row[data-v-5e38ef3d]{grid-auto-flow:row}}.simple-box-row .simple-box[data-v-5e38ef3d]{width:100%}.simple-box-row .simple-box ul[data-v-5e38ef3d]{word-break:break-all}.simple-box-row .simple-box[data-v-5e38ef3d]:not(:last-of-type){margin-right:20px}.simple-box-row .simple-box .deployment__origin__row[data-v-5e38ef3d]{display:flex;flex-direction:column}.simple-box-row .simple-box .deployment__origin__row h4[data-v-5e38ef3d]:first-of-type{font-weight:700;margin-bottom:0}.simple-box-row .simple-box .deployment__origin__row h4[data-v-5e38ef3d]:last-of-type{word-break:break-all}.simple-box-row .simple-box .deployment__origin__row:last-of-type h4[data-v-5e38ef3d]:last-of-type{margin-bottom:0}.simple-box-row .simple-box .deployment__origin__row thead tr th[data-v-5e38ef3d]{text-align:left;color:var(--muted);font-weight:300}.simple-box-row .simple-box .scale-instances[data-v-5e38ef3d]{display:flex;align-items:center}.simple-box-row .simple-box .scale-instances .plus-minus[data-v-5e38ef3d]{width:100%;display:flex;align-items:center;justify-content:center}.simple-box-row .box[data-v-5e38ef3d]{display:flex;justify-content:flex-start;align-items:flex-start}.simple-box-row .box h1[data-v-5e38ef3d],.simple-box-row .box h3[data-v-5e38ef3d]{margin-left:5}.simple-box-row .box h3[data-v-5e38ef3d]{flex:1;display:flex}.simple-box-row .box-two-cols[data-v-5e38ef3d]{display:flex}.simple-box-row .box-two-cols h1[data-v-5e38ef3d]{font-size:4.5rem;padding:0 10px}.simple-box-row .box-two-cols div[data-v-5e38ef3d]{margin-top:8px}.simple-box-row .box-timers[data-v-5e38ef3d]{display:flex;flex-direction:column}.simple-box-row .box-timers h4[data-v-5e38ef3d]{font-size:1.6rem}.simple-box-row .box-timers div[data-v-5e38ef3d]{width:100%;display:flex;justify-content:space-between}.stats-table[data-v-5e38ef3d]{display:flex;width:100%}.stats-table table[data-v-5e38ef3d]{width:100%}.stats[data-v-5e38ef3d]{display:grid;grid-template-columns:1fr 1fr;margin:12px 0;position:relative}.stats[data-v-5e38ef3d]:before{content:"";border-right:1px solid var(--default);position:absolute;top:0;bottom:0;left:50%;width:1px}.stats>div[data-v-5e38ef3d]:nth-child(2){display:flex;flex-direction:column;align-items:flex-end}.stats h3[data-v-5e38ef3d]{font-size:16px}.stats ul[data-v-5e38ef3d]{display:flex;flex-direction:column;gap:8px;margin:0;padding:0}.stats ul li[data-v-5e38ef3d]{list-style:none;font-size:14px}.stats>div:nth-child(2) ul[data-v-5e38ef3d]{align-items:flex-end}.deployment__details__header[data-v-5e38ef3d]{display:flex;align-items:center}.deployment__details__header h4[data-v-5e38ef3d]{margin:0}.deployment__details__header .git-icon[data-v-5e38ef3d]{margin:0 3px 0 -3px;font-size:25px}.deployment__origin__list ul[data-v-5e38ef3d]{margin:0;padding:0;display:grid;grid-template-columns:1fr 1fr}.deployment__origin__list ul li[data-v-5e38ef3d]{margin:5px;list-style:none}.deployment__origin__list ul li h4[data-v-5e38ef3d]{color:var(--default-text);font-weight:300;font-size:14px;margin:0}.sortable-table-avatar[data-v-5e38ef3d]{display:flex;align-items:center;justify-content:flex-start}.sortable-table-avatar img[data-v-5e38ef3d]{width:30px;height:30px;border-radius:var(--border-radius);margin-right:10px}.sortable-table-commit[data-v-5e38ef3d]{display:flex}.redeploy-info[data-v-5e38ef3d]{margin:0}',""]),e.exports=t}}]);
//# sourceMappingURL=epinio-1.11.0-1.umd.min.detail.js.map