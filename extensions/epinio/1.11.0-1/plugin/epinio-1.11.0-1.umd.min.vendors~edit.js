(("undefined"!==typeof self?self:this)["webpackJsonpepinio_1_11_0_1"]=("undefined"!==typeof self?self:this)["webpackJsonpepinio_1_11_0_1"]||[]).push([[9],{"0cb2":function(e,t,a){"use strict";var s=function(){var e=this,t=e._self._c;return t("div",{class:{"side-tabs":!!e.sideTabs,"tabs-only":e.tabsOnly}},[t("ul",{ref:"tablist",staticClass:"tabs",class:{clearfix:!e.sideTabs,vertical:e.sideTabs,horizontal:!e.sideTabs},attrs:{role:"tablist",tabindex:"0"},on:{keydown:[function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"right",39,t.key,["Right","ArrowRight"])||"button"in t&&2!==t.button?null:(t.preventDefault(),e.selectNext(1))},function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"left",37,t.key,["Left","ArrowLeft"])||"button"in t&&0!==t.button?null:(t.preventDefault(),e.selectNext(-1))},function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"down",40,t.key,["Down","ArrowDown"])?null:(t.preventDefault(),e.selectNext(1))},function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"up",38,t.key,["Up","ArrowUp"])?null:(t.preventDefault(),e.selectNext(-1))}]}},[e._l(e.sortedTabs,(function(a){return t("li",{key:a.name,class:{tab:!0,active:a.active,disabled:a.disabled,error:a.error},attrs:{id:a.name,"data-testid":a.name,role:"presentation"}},[t("a",{attrs:{"data-testid":"btn-"+a.name,"aria-controls":"#"+a.name,"aria-selected":a.active,role:"tab"},on:{click:function(t){return t.preventDefault(),e.select(a.name,t)}}},[t("span",[e._v(e._s(a.labelDisplay))]),a.badge?t("span",{staticClass:"tab-badge"},[e._v(e._s(a.badge))]):e._e(),e.hasIcon(a)?t("i",{directives:[{name:"clean-tooltip",rawName:"v-clean-tooltip",value:e.t("validation.tab"),expression:"t('validation.tab')"}],staticClass:"conditions-alert-icon icon-error"}):e._e()])])})),e.sideTabs&&!e.sortedTabs.length?t("li",{staticClass:"tab disabled"},[t("a",{attrs:{href:"#"},on:{click:function(e){e.preventDefault()}}},[e._v("(None)")])]):e._e(),e.sideTabs&&e.showTabsAddRemove?t("ul",{staticClass:"tab-list-footer"},[t("li",[t("button",{staticClass:"btn bg-transparent",attrs:{type:"button"},on:{click:e.tabAddClicked}},[t("i",{staticClass:"icon icon-plus"})]),t("button",{staticClass:"btn bg-transparent",attrs:{type:"button",disabled:!e.sortedTabs.length},on:{click:e.tabRemoveClicked}},[t("i",{staticClass:"icon icon-minus"})])])]):e._e(),e._t("tab-row-extras")],2),t("div",{class:{"tab-container":!!e.tabs.length||!!e.sideTabs,"no-content":e.noContent,"tab-container--flat":!!e.flat}},[e._t("default")],2)])},r=[],o=a("a1d8"),n=a.n(o),i=a("330a"),l=a.n(i),d=a("bddd"),c=a("1d19"),u=a("1659"),b=a.n(u),h={name:"Tabbed",props:{defaultTab:{type:String,default:null},sideTabs:{type:Boolean,default:!1},showTabsAddRemove:{type:Boolean,default:!1},scrollOnChange:{type:Boolean,default:!1},useHash:{type:Boolean,default:!0},noContent:{type:Boolean,default:!1},flat:{type:Boolean,default:!1},tabsOnly:{type:Boolean,default:!1}},provide(){const e=this.tabs;return{sideTabs:this.sideTabs,addTab(t){const a=Object(d["e"])(e,"name",t.name);a&&Object(d["i"])(e,a),Object(d["a"])(e,t)},removeTab(t){Object(d["i"])(e,t)}}},data(){return{tabs:[],activeTabName:null}},computed:{sortedTabs(){return Object(c["a"])(this.tabs,["weight:desc","labelDisplay","name"])}},watch:{sortedTabs(e){const{defaultTab:t,useHash:a}=this,s=e.find(e=>e.active),r=a?this.$route.hash:void 0,o=a?r.slice(1):void 0,i=e.find(e=>e.name===o&&!e.active),d=n()(e)||null;l()(s)?a&&!l()(i)?this.select(i.name):l()(t)||l()(e.find(e=>e.name===t))?null!==d&&void 0!==d&&d.name&&this.select(d.name):this.select(t):a&&(null===s||void 0===s?void 0:s.name)===o&&this.select(s.name)}},mounted(){this.useHash&&window.addEventListener("hashchange",this.hashChange)},unmounted(){this.useHash&&window.removeEventListener("hashchange",this.hashChange)},methods:{hasIcon(e){return e.displayAlertIcon||e.error&&!e.active},hashChange(){if(!this.scrollOnChange){const e=document.getElementsByTagName("main")[0];e&&(e.scrollTop=0)}this.select(this.$route.hash)},find(e){return this.sortedTabs.find(t=>t.name===e)},select(e){const{sortedTabs:t}=this,a=this.find(e),s="#"+e;if(a&&!a.disabled){if(this.useHash){const{$route:{hash:e},$router:{currentRoute:t}}=this;if(this.useHash&&e!==s){const e={...t};e.hash=s,this.$router.replace(e)}}for(const e of t)e.active=e.name===a.name;this.$emit("changed",{tab:a,selectedName:a.name}),this.activeTabName=a.name}},selectNext(e){const{sortedTabs:t}=this,a=t.findIndex(e=>e.active),s=o(a,e,t.length),r=t[s].name;function o(e,t,a){const s=e+t;return s>=a?0:s<=0?a-1:s}this.select(r),this.$nextTick(()=>{this.$refs.tablist.focus()})},tabAddClicked(){const e=b()(this.tabs,e=>e.active);this.$emit("addTab",e)},tabRemoveClicked(){const e=b()(this.tabs,e=>e.active);this.$emit("removeTab",e)}}},p=h,f=(a("5074"),a("d802")),v=Object(f["a"])(p,s,r,!1,null,"f1718c5e",null);t["a"]=v.exports},1659:function(e,t,a){var s=a("0ee5"),r=a("4b7a"),o=a("9b66"),n=Math.max;function i(e,t,a){var i=null==e?0:e.length;if(!i)return-1;var l=null==a?0:o(a);return l<0&&(l=n(i+l,0)),s(e,r(t,3),l)}e.exports=i},"38de":function(e,t,a){"use strict";var s=function(){var e=this,t=e._self._c;return t("section",{directives:[{name:"show",rawName:"v-show",value:e.active,expression:"active"}],attrs:{id:e.name,"aria-hidden":!e.active,role:"tabpanel"}},[e.shouldShowHeader?t("div",{staticClass:"tab-header"},[t("h2",[e._v(" "+e._s(e.labelDisplay)+" "),e.tooltip?t("i",{directives:[{name:"clean-tooltip",rawName:"v-clean-tooltip",value:e.tooltip,expression:"tooltip"}],staticClass:"icon icon-info icon-lg"}):e._e()]),e._t("tab-header-right")],2):e._e(),e._t("default",null,null,{active:e.active})],2)},r=[],o={inject:["addTab","removeTab","sideTabs"],props:{label:{default:null,type:String},labelKey:{default:null,type:String},name:{required:!0,type:String},tooltip:{default:null,type:[String,Object]},weight:{default:0,required:!1,type:Number},showHeader:{type:Boolean,default:null},displayAlertIcon:{type:Boolean,default:null},error:{type:Boolean,default:!1},badge:{default:0,required:!1,type:Number}},data(){return{active:null}},computed:{labelDisplay(){return this.labelKey?this.$store.getters["i18n/t"](this.labelKey):this.label?this.label:this.name},shouldShowHeader(){return null!==this.showHeader?this.showHeader:this.sideTabs||!1}},watch:{active(e){e&&this.$emit("active")}},mounted(){this.addTab(this)},beforeDestroy(){this.removeTab(this)}},n=o,i=(a("94fd"),a("d802")),l=Object(i["a"])(n,s,r,!1,null,"667bdd63",null);t["a"]=l.exports},5074:function(e,t,a){"use strict";a("9c34")},"5a1e":function(e,t,a){var s=a("5eaa");t=s(!1),t.push([e.i,".tabs[data-v-f1718c5e]{list-style-type:none;margin:0;padding:0}.tabs.horizontal[data-v-f1718c5e]{border:solid thin var(--border);border-bottom:0;display:flex;flex-direction:row}.tabs.horizontal+.tab-container[data-v-f1718c5e]{border:solid thin var(--border)}.tabs.horizontal .tab.active[data-v-f1718c5e]{border-bottom:solid 2px var(--primary)}.tabs[data-v-f1718c5e]:focus{outline:none}.tabs:focus .tab.active a span[data-v-f1718c5e]{text-decoration:underline}.tabs .tab[data-v-f1718c5e]{position:relative;float:left;padding:0 8px 0 0;cursor:pointer}.tabs .tab A[data-v-f1718c5e]{display:flex;align-items:center;padding:10px 15px}.tabs .tab A[data-v-f1718c5e]:hover{text-decoration:none}.tabs .tab A:hover span[data-v-f1718c5e]{text-decoration:underline}.tabs .tab .conditions-alert-icon[data-v-f1718c5e]{color:var(--error);padding-left:4px}.tabs .tab[data-v-f1718c5e]:last-child{padding-right:0}.tabs .tab.active>A[data-v-f1718c5e]{color:var(--primary);text-decoration:none}.tabs .tab.error A>i[data-v-f1718c5e]{color:var(--error)}.tabs .tab .tab-badge[data-v-f1718c5e]{margin-left:5px;background-color:var(--link);color:#fff;border-radius:6px;padding:1px 7px;font-size:11px}.tab-container[data-v-f1718c5e]{padding:20px}.tab-container.no-content[data-v-f1718c5e]{padding:0 0 3px 0}.tab-container--flat[data-v-f1718c5e]{padding:0}.tab-container--flat .side-tabs[data-v-f1718c5e]{box-shadow:unset}.tabs-only[data-v-f1718c5e]{margin-bottom:20px}.tabs-only .tab-container[data-v-f1718c5e]{display:none}.tabs-only .tabs[data-v-f1718c5e]{border:0;border-bottom:2px solid var(--border)}.side-tabs[data-v-f1718c5e]{display:flex;box-shadow:0 0 20px var(--shadow);border-radius:calc(var(--border-radius)*2);background-color:var(--tabbed-sidebar-bg)}.side-tabs .tab-container[data-v-f1718c5e]{padding:20px}.side-tabs .tabs[data-v-f1718c5e]{width:200px;min-width:200px;display:flex;flex:1 0;flex-direction:column}.side-tabs .tabs .tab[data-v-f1718c5e]{width:100%;border-left:5px solid transparent}.side-tabs .tabs .tab.toggle A[data-v-f1718c5e],.side-tabs .tabs .tab A[data-v-f1718c5e]{color:var(--primary)}.side-tabs .tabs .tab.active[data-v-f1718c5e]{background-color:var(--body-bg);border-left:solid 5px var(--primary)}.side-tabs .tabs .tab.active A[data-v-f1718c5e]{color:var(--input-label)}.side-tabs .tabs .tab.disabled[data-v-f1718c5e]{background-color:var(--disabled-bg)}.side-tabs .tabs .tab.disabled A[data-v-f1718c5e]{color:var(--disabled-text);text-decoration:none}.side-tabs .tabs .tab-list-footer[data-v-f1718c5e]{list-style:none;padding:0;margin-top:auto}.side-tabs .tabs .tab-list-footer li[data-v-f1718c5e]{display:flex;flex:1}.side-tabs .tabs .tab-list-footer li .btn[data-v-f1718c5e]{flex:1 1;display:flex;justify-content:center}.side-tabs .tabs .tab-list-footer li button[data-v-f1718c5e]:first-of-type{border-top:solid 1px var(--border);border-right:solid 1px var(--border);border-top-right-radius:0}.side-tabs .tabs .tab-list-footer li button[data-v-f1718c5e]:last-of-type{border-top:solid 1px var(--border);border-top-left-radius:0}.side-tabs .tab-container[data-v-f1718c5e]{width:calc(100% - 200px);flex-grow:1;background-color:var(--body-bg)}",""]),e.exports=t},"5a6c":function(e,t,a){var s=a("5eaa");t=s(!1),t.push([e.i,".tab-header[data-v-667bdd63]{display:flex;justify-content:space-between;margin-bottom:15px;align-items:center}.tab-header h2[data-v-667bdd63]{margin:0}",""]),e.exports=t},"7d6c":function(e,t,a){var s=a("9ef5"),r=1/0,o=17976931348623157e292;function n(e){if(!e)return 0===e?e:0;if(e=s(e),e===r||e===-r){var t=e<0?-1:1;return t*o}return e===e?e:0}e.exports=n},"94fd":function(e,t,a){"use strict";a("d076")},"9b66":function(e,t,a){var s=a("7d6c");function r(e){var t=s(e),a=t%1;return t===t?a?t-a:t:0}e.exports=r},"9c34":function(e,t,a){var s=a("5a1e");s.__esModule&&(s=s.default),"string"===typeof s&&(s=[[e.i,s,""]]),s.locals&&(e.exports=s.locals);var r=a("0ed3").default;r("e1b83e60",s,!0,{sourceMap:!1,shadowMode:!1})},a1d8:function(e,t){function a(e){return e&&e.length?e[0]:void 0}e.exports=a},c422:function(e,t,a){"use strict";var s=function(){var e=this,t=e._self._c;return t("Tabbed",e._b({attrs:{"default-tab":e.defaultTab},on:{changed:e.tabChange}},"Tabbed",e.$attrs,!1),[e._t("default"),e.showConditions?t("Tab",{attrs:{"label-key":"resourceTabs.conditions.tab",name:"conditions",weight:-1,"display-alert-icon":e.conditionsHaveIssues}},[t("Conditions",{attrs:{value:e.value}})],1):e._e(),e.showEvents?t("Tab",{attrs:{"label-key":"resourceTabs.events.tab",name:"events",weight:-2}},["events"===e.selectedTab?t("SortableTable",{attrs:{rows:e.events,headers:e.eventHeaders,"key-field":"id",search:!1,"table-actions":!1,"row-actions":!1,"default-sort-by":"date"}}):e._e()],1):e._e(),e.showRelated?t("Tab",{attrs:{name:"related","label-key":"resourceTabs.related.tab",weight:-3}},[t("h3",{directives:[{name:"t",rawName:"v-t",value:"resourceTabs.related.from",expression:"'resourceTabs.related.from'"}]}),t("RelatedResources",{attrs:{"ignore-types":[e.value.type],value:e.value,direction:"from"}}),t("h3",{directives:[{name:"t",rawName:"v-t",value:"resourceTabs.related.to",expression:"'resourceTabs.related.to'"}],staticClass:"mt-20"}),t("RelatedResources",{attrs:{"ignore-types":[e.value.type],value:e.value,direction:"to"}})],1):e._e(),e._l(e.extensionTabs,(function(a,s){return t("Tab",{key:`${a.name}${s}`,attrs:{name:a.name,label:a.label,"label-key":a.labelKey,weight:a.weight,tooltip:a.tooltip,"show-header":a.showHeader,"display-alert-icon":a.displayAlertIcon,error:a.error,badge:a.badge}},[t(a.component,{tag:"component",attrs:{resource:e.value}})],1)}))],2)},r=[],o=a("0cb2"),n=a("38de"),i=a("305c"),l=function(){var e=this,t=e._self._c;return t("SortableTable",{attrs:{headers:e.headers,rows:e.rows,"key-field":"condition","default-sort-by":"condition","table-actions":!1,"row-actions":!1,search:!1},scopedSlots:e._u([{key:"cell:condition",fn:function({row:a}){return[t("span",{class:{"text-error":a.error}},[e._v(e._s(a.condition))])]}},{key:"cell:status",fn:function({row:a}){return[t("span",{class:{"text-error":a.error}},[e._v(e._s(a.status))])]}}])})},d=[],c=a("0fb1"),u={components:{SortableTable:c["b"]},props:{value:{type:Object,default:()=>({})}},computed:{headers(){return[{name:"condition",labelKey:"tableHeaders.condition",value:"condition",width:150,sort:"condition",dashIfEmpty:!0},{name:"status",labelKey:"tableHeaders.status",value:"status",width:75,sort:"status",dashIfEmpty:!0},{name:"time",labelKey:"tableHeaders.updated",value:"time",sort:"time",formatter:"LiveDate",formatterOpts:{addSuffix:!0},width:125,dashIfEmpty:!0},{name:"message",labelKey:"tableHeaders.message",value:"message",sort:["message"],dashIfEmpty:!0}]},rows(){var e;return((null===(e=this.value.status)||void 0===e?void 0:e.conditions)||[]).map(e=>{let t=e.message||"";return e.reason&&(t=`[${e.reason}] ${t}`.trim()),{condition:e.type||"Unknown",status:e.status||"Unknown",error:e.error,time:e.lastProbeTime||e.lastUpdateTime||e.lastTransitionTime,message:t}})}}},b=u,h=a("d802"),p=Object(h["a"])(b,l,d,!1,null,null,null),f=p.exports,v=a("907c"),m=a("da25"),y=function(){var e=this,t=e._self._c;return t("ResourceTable",{attrs:{schema:null,rows:e.rows,headers:e.headers,search:!1,"table-actions":!1,namespaced:!0,"mangle-action-resources":e.getRealResources,"paging-label":"sortableTable.paging.generic",groupable:!1},scopedSlots:e._u([{key:"cell:state",fn:function({row:e}){return[e.real?t("BadgeState",{attrs:{value:e.real}}):t("BadgeState",{attrs:{value:e}})]}}])})},g=[],x=a("126f"),T=a("9c09"),w=a("462f"),_=a("1d19"),k=a("bcb3"),$=a("f17a"),C={components:{ResourceTable:x["a"],BadgeState:$["a"]},props:{value:{type:Object,required:!0},rel:{type:String,default:null},direction:{type:String,default:"to"},ignoreTypes:{type:Array,default:()=>[]}},data(){return{loadedResources:1}},computed:{filteredRelationships(){var e,t;let a=(null===(e=this.value)||void 0===e||null===(t=e.metadata)||void 0===t?void 0:t.relationships)||[];return a=a.filter(e=>{const t=e[this.direction+"Type"];return!(!t||this.ignoreTypes.includes(t))&&(!this.rel||e.rel===this.rel)}),a},rows(){if(this.loadedResources<1)return;const e=this.$store.getters["clusterId"],t=this.$store.getters["currentStore"](),a=[];for(const s of this.filteredRelationships){const r=s.state||"active",o=Object(T["b"])(r,s.error,s.transitioning),n=s[this.direction+"Type"],i=this.$store.getters[t+"/schemaFor"](n);let l=s[this.direction+"Id"];if(!l)continue;let d=null;const c=l.indexOf("/"),u=`${n}/${d}/${l}`;c>0&&(d=l.substr(0,c),l=l.substr(c+1));const b={name:`c-cluster-product-resource${d?"-namespace":""}-id`,params:{product:k["a"],cluster:"management"===t?"local":e,resource:n,namespace:d,id:l}};a.push({type:n,real:this.$store.getters[t+"/byId"](n,s[this.direction+"Id"]),id:s[this.direction+"Id"],state:r,metadata:{namespace:d,name:l},_key:u,name:l,namespace:d,nameDisplay:l,nameSort:Object(_["b"])(l).toLowerCase(),stateColor:o,detailLocation:b,typeDisplay:this.$store.getters["type-map/labelFor"](i),stateDisplay:Object(T["e"])(r),stateBackground:o.replace("text-","bg-"),groupByLabel:d})}return a},headers(){return[w["J"],w["O"],w["s"],w["t"]]}},methods:{async getRealResources(e){const t=this.$store.getters["currentStore"](),a=await Promise.allSettled(e.map(e=>this.$store.dispatch(t+"/find",{type:e.type,id:e.id}))),s=[];for(let r=0;r<a.length;r++)"fulfilled"===a[r].status&&s.push(a[r].value);return this.loadedResources++,s}}},O=C,R=Object(h["a"])(O,y,g,!1,null,null,null),S=R.exports,j=a("7083"),A=a("1722"),H={name:"ResourceTabs",components:{Tabbed:o["a"],Tab:n["a"],Conditions:f,SortableTable:c["b"],RelatedResources:S},mixins:[i["a"]],props:{value:{type:Object,default:()=>({})},mode:{type:String,default:m["u"]},defaultTab:{type:String,default:null},needConditions:{type:Boolean,default:!0},needEvents:{type:Boolean,default:!0},needRelated:{type:Boolean,default:!0},extensionParams:{type:Object,default:null}},data(){const e=this.$store.getters["currentStore"](v["f"]);return{hasEvents:this.$store.getters[e+"/schemaFor"](v["f"]),allEvents:[],selectedTab:this.defaultTab,didLoadEvents:!1,extensionTabs:Object(A["a"])(this,j["c"].TAB,j["e"].RESOURCE_DETAIL,this.$route,this,this.extensionParams)}},beforeDestroy(){this.$store.dispatch("cluster/forgetType",v["f"])},computed:{showConditions(){const e=this.$store.getters["currentStore"](this.value.type);var t;return!!this.$store.getters[e+"/schemaFor"](this.value.type)&&(this.isView&&this.needConditions&&(null===(t=this.value)||void 0===t?void 0:t.type)&&this.$store.getters[e+"/pathExistsInSchema"](this.value.type,"status.conditions"))},showEvents(){return this.isView&&this.needEvents&&this.hasEvents},showRelated(){return this.isView&&this.needRelated},eventHeaders(){return[{name:"type",label:this.t("tableHeaders.type"),value:"eventType",sort:"eventType"},{name:"reason",label:this.t("tableHeaders.reason"),value:"reason",sort:"reason"},{name:"date",label:this.t("tableHeaders.updated"),value:"date",sort:"date:desc",formatter:"LiveDate",formatterOpts:{addSuffix:!0},width:125},{name:"message",label:this.t("tableHeaders.message"),value:"message",sort:"message"}]},events(){return this.allEvents.filter(e=>{var t,a,s;return(null===(t=e.involvedObject)||void 0===t?void 0:t.uid)===(null===(a=this.value)||void 0===a||null===(s=a.metadata)||void 0===s?void 0:s.uid)}).map(e=>({reason:`${e.reason||this.t("generic.unknown")}${e.count>1?` (${e.count})`:""}`.trim(),message:e.message||this.t("generic.unknown"),date:e.lastTimestamp||e.firstTimestamp||e.metadata.creationTimestamp,eventType:e.eventType}))},conditionsHaveIssues(){var e,t;return!!this.showConditions&&(null===(e=this.value.status)||void 0===e||null===(t=e.conditions)||void 0===t?void 0:t.filter(e=>!Object(T["d"])(e)).some(e=>e.error))}},methods:{tabChange(e){if(this.selectedTab=null===e||void 0===e?void 0:e.selectedName,!this.didLoadEvents&&"events"===this.selectedTab){const e=this.$store.getters["currentStore"](v["f"]);this.$store.dispatch(e+"/findAll",{type:v["f"]}).then(e=>{this.allEvents=e,this.didLoadEvents=!0})}}}},E=H,B=Object(h["a"])(E,s,r,!1,null,null,null);t["a"]=B.exports},d076:function(e,t,a){var s=a("5a6c");s.__esModule&&(s=s.default),"string"===typeof s&&(s=[[e.i,s,""]]),s.locals&&(e.exports=s.locals);var r=a("0ed3").default;r("70047b50",s,!0,{sourceMap:!1,shadowMode:!1})}}]);
//# sourceMappingURL=epinio-1.11.0-1.umd.min.vendors~edit.js.map